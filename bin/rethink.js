!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.rethink=t()}}(function(){var t;return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[s]={exports:{}};t[s][0].call(a.exports,function(e){var n=t[s][1][e];return o(n?n:e)},a,a.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){function r(){a=!1,u.length?h=u.concat(h):p=-1,h.length&&o()}function o(){if(!a){var t=setTimeout(r);a=!0;for(var e=h.length;e;){for(u=h,h=[];++p<e;)u&&u[p].run();p=-1,e=h.length}u=null,a=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function s(){}var u,c=e.exports={},h=[],a=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new i(t,e)),1!==h.length||a||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t);var e=this;e._msgId=0,e._subscriptions={},e._responseTimeOut=5e3,e._responseCallbacks={},e._registerExternalListener()}return o(t,[{key:"addListener",value:function(t,e){var n=this,r=new s(n._subscriptions,t,e),o=n._subscriptions[t];return o||(o=[],n._subscriptions[t]=o),o.push(r),r}},{key:"addResponseListener",value:function(t,e,n){this._responseCallbacks[t+e]=n}},{key:"removeResponseListener",value:function(t,e){delete this._responseCallbacks[t+e]}},{key:"removeAllListenersOf",value:function(t){delete this._subscriptions[t]}},{key:"bind",value:function(t,e,n){var r=this,o=this,i=o.addListener(t,function(t){n.postMessage(t)}),s=n.addListener(e,function(t){o.postMessage(t)});return{thisListener:i,targetListener:s,unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:"_publishOnDefault",value:function(t){var e=this._subscriptions["*"];e&&this._publishOn(e,t)}},{key:"_publishOn",value:function(t,e){t.forEach(function(t){t._callback(e)})}},{key:"_responseCallback",value:function(t,e){var n=this;e&&!function(){var r=t.from+t.id;n._responseCallbacks[r]=e,setTimeout(function(){var e=n._responseCallbacks[r];if(delete n._responseCallbacks[r],e){var o={id:t.id,type:"response",body:{code:408,desc:"Response timeout!",value:t}};e(o)}},n._responseTimeOut)}()}},{key:"_onResponse",value:function(t){var e=this;if("response"===t.type){var n=t.to+t.id,r=e._responseCallbacks[n];if(t.body.code>=200&&delete e._responseCallbacks[n],r)return r(t),!0}return!1}},{key:"_onMessage",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?e._publishOn(n,t):e._publishOnDefault(t)}}},{key:"_genId",value:function(t){t.id&&0!==t.id||(this._msgId++,t.id=this._msgId)}},{key:"postMessage",value:function(t,e){}},{key:"_onPostMessage",value:function(t){}},{key:"_registerExternalListener",value:function(){}}]),t}(),s=function(){function t(e,n,o){r(this,t);var i=this;i._subscriptions=e,i._url=n,i._callback=o}return o(t,[{key:"remove",value:function(){var t=this,e=t._subscriptions[t._url];if(e){var n=e.indexOf(t);e.splice(n,1),0===e.length&&delete t._subscriptions[t._url]}}},{key:"url",get:function(){return this._url}}]),t}();n["default"]=i},{}],3:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("./Bus"),h=r(c),a=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).call(this))}return s(e,t),u(e,[{key:"postMessage",value:function(t,e){var n=this;return n._genId(t),n._responseCallback(t,e),n._onPostMessage(t),t.id}},{key:"_onMessage",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?(e._publishOn(n,t),t.to.startsWith("hyperty")||e._publishOnDefault(t)):e._publishOnDefault(t)}}}]),e}(h["default"]);n["default"]=a},{"./Bus":2}],4:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){r(this,t);var n=this;n._bus=e,n._components={},e.addListener(t.InternalDeployAddress,function(t){switch(t.type){case"create":n._onDeploy(t);break;case"delete":n._onRemove(t)}})}return o(t,[{key:"_responseMsg",value:function(e,n,r){var o={id:e.id,type:"response",from:t.InternalDeployAddress,to:t.ExternalDeployAddress},i={};return n&&(i.code=n),r&&(i.desc=r),o.body=i,o}},{key:"_onDeploy",value:function(t){var e=this,n=t.body.config,r=t.body.url,o=t.body.sourceCode,i=void 0,s=void 0;if(e._components.hasOwnProperty(r))i=500,s="Instance "+r+" already exist!";else try{e._components[r]=e._create(r,o,n),i=200}catch(u){i=500,s=u}var c=e._responseMsg(t,i,s);e._bus.postMessage(c)}},{key:"_onRemove",value:function(t){var e=this,n=t.body.url,r=void 0,o=void 0;e._components.hasOwnProperty(n)?(delete e._components[n],e._bus.removeAllListenersOf(n),r=200):(r=500,o="Instance "+n+" doesn't exist!");var i=e._responseMsg(t,r,o);e._bus.postMessage(i)}},{key:"_create",value:function(t,e,n){}},{key:"components",get:function(){return this._components}}]),t}();i.ExternalDeployAddress="hyperty-runtime://sandbox/external",i.InternalDeployAddress="hyperty-runtime://sandbox/internal",n["default"]=i},{}],5:[function(e,n,r){(function(e,o){(function(i){function s(t){return t&&t.Object===Object?t:null}function u(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function c(t){return function(){try{return t.apply(this,arguments)}catch(e){return ne.e=e,ne}}}function h(t){throw t}function a(t,e){if(oe&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ce)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+ce+"\n");t.stack=p(o)}}function p(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;o>r;r++){var i=e[r];l(i)||f(i)||!i||n.push(i)}return n.join("\n")}function l(t){var e=v(t);if(!e)return!1;var n=e[0],r=e[1];return n===se&&r>=ue&&Is>=r}function f(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function d(){if(oe)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=v(n);if(!r)return;return se=r[0],r[1]}}function v(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function b(t,e,n,r,o,s){var u=Ke(t),c=u.length,h=Ke(e),a=h.length;if(c!==a&&!r)return!1;for(var p,l=c;l--;)if(p=u[l],!(r?p in e:He.call(e,p)))return!1;for(var f=r;++l<c;){p=u[l];var d,v=t[p],b=e[p];if(!(d===i?n(v,b,r,o,s):d))return!1;f||(f="constructor"===p)}if(!f){var _=t.constructor,m=e.constructor;if(_!==m&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof m&&m instanceof m))return!1}return!0}function _(t,e,n){switch(n){case Ee:case Ce:return+t===+e;case ke:return t.name===e.name&&t.message===e.message;case Ne:return t!==+t?e!==+e:t===+e;case Oe:case qe:return t===e+""}return!1}function m(t){return!!t&&"object"==typeof t}function y(t){return"number"==typeof t&&t>-1&&t%1===0&&Ze>=t}function g(t){return m(t)&&y(t.length)&&!!We[$e.call(t)]}function w(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t,e,n,r,o,s){var u=-1,c=t.length,h=e.length;if(c!==h&&!(r&&h>c))return!1;for(;++u<c;){var a,p=t[u],l=e[u];if(a!==i){if(a)continue;return!1}if(r){if(!w(e,function(t){return p===t||n(p,t,r,o,s)}))return!1}else if(p!==l&&!n(p,l,r,o,s))return!1}return!0}function E(t,e,n,r,o,i){var s=Ge(t),u=Ge(e),c=xe,h=xe;s||(c=$e.call(t),c===we?c=Se:c!==Se&&(s=g(t))),u||(h=$e.call(e),h===we&&(h=Se));var a=c===Se&&!Je(t),p=h===Se&&!Je(e),l=c===h;if(l&&!s&&!a)return _(t,e,c);if(!r){var f=a&&He.call(t,"__wrapped__"),d=p&&He.call(e,"__wrapped__");if(f||d)return n(f?t.value():t,d?e.value():e,r,o,i)}if(!l)return!1;o||(o=[]),i||(i=[]);for(var v=o.length;v--;)if(o[v]===t)return i[v]===e;o.push(t),i.push(e);var m=(s?x:b)(t,e,n,r,o,i);return o.pop(),i.pop(),m}function C(t,e,n,r,o){return t===e?!0:null==t||null==e||!st(t)&&!m(e)?t!==t&&e!==e:E(t,e,C,n,r,o)}function k(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function A(t,e){this.id=t,this.value=e}function D(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function N(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function S(t){this._s=t,this.isDisposed=!1}function O(t){this._s=t}function j(t){this._s=t,this._l=t.length,this._i=0}function q(t){this._a=t}function R(t){this._a=t,this._l=T(t),this._i=0}function P(t){return"number"==typeof t&&Ht.isFinite(t)}function z(t){var e,n=t[ve];if(!n&&"string"==typeof t)return e=new O(t),e[ve]();if(!n&&t.length!==i)return e=new q(t),e[ve]();if(!n)throw new TypeError("Object is not iterable");return t[ve]()}function F(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function T(t){var e=+t.length;return isNaN(e)?0:0!==e&&P(e)?(e=F(e)*Math.floor(Math.abs(e)),0>=e?0:e>_r?_r:e):e}function I(t,e){return wn(t)||(t=Nn),new yr(e,t)}function Q(t,e){this.observer=t,this.parent=e}function M(t,e){return t.amb(e)}function L(){return!1}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function L(){return!1}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function L(){return!1}function B(){return[]}function L(){return!1}function B(){return[]}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function W(t){return function(e){return t.subscribe(e)}}function V(t){return t.toArray()}function H(t){return t.length>0}function $(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function $(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function Z(t,e,n){var r=ye(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return te(o)&&(o=hr(o)),(me(o)||_e(o))&&(o=mr(o)),o}).concatAll()}function K(t,e,n){for(var r=0,o=t.length;o>r;r++)if(n(t[r],e))return r;return-1}function J(t){this.comparer=t,this.set=[]}function G(t,e){return function(n){for(var r=n,o=0;e>o;o++){var s=r[t[o]];if("undefined"==typeof s)return i;r=s}return r}}function X(t){if(0===t.length)throw new he;return t[0]}function Y(t,e,n,r){var o=ye(e,n,3);return new Ss(function(e){return t.subscribe(new fi(e,t,o,r))},t)}function tt(t){return t?Jn.isObservable(t)?t:te(t)?Jn.fromPromise(t):it(t)||ot(t)?xi.call(this,t):ee(t)?rt.call(this,t):me(t)||_e(t)?et.call(this,t):st(t)?nt.call(this,t):t:t}function et(t){return Jn.from(t).concatMap(function(t){return Jn.isObservable(t)||st(t)?tt.call(null,t):$t.Observable.just(t)}).toArray()}function nt(t){function e(t,e){n[e]=i,o.push(t.map(function(t){n[e]=t}))}for(var n=new t.constructor,r=Object.keys(t),o=[],s=0,u=r.length;u>s;s++){var c=r[s],h=tt.call(this,t[c]);h&&Jn.isObservable(h)?e(h,c):n[c]=t[c]}return Jn.forkJoin.apply(Jn,o).map(function(){return n})}function rt(t){var e=this;return new Ss(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],o=1,i=arguments.length;i>o;o++)r.push(arguments[o]);e=r}n.onNext(e),n.onCompleted()})})}function ot(t){return ee(t.next)&&ee(t["throw"])}function it(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:ot(e.prototype):!1}function st(t){return Object==t.constructor}function ut(t,e,n,r){var o=new Ps;return r.push(ct(o,e,n)),t.apply(e,r),o.asObservable()}function ct(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];if(ee(n)){if(o=re(n).apply(e,o),o===ne)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function ht(t,e,n,r){var o=new Ps;return r.push(at(o,e,n)),t.apply(e,r),o.asObservable()}function at(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var o=arguments.length,i=[],s=1;o>s;s++)i[s-1]=arguments[s];if(ee(n)){var i=re(n).apply(e,i);if(i===ne)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function pt(t){return Ht.StaticNodeList?t instanceof Ht.StaticNodeList||t instanceof Ht.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function lt(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function ft(t,e,n){var r=new on,o=Object.prototype.toString.call(t);if(pt(t)||"[object HTMLCollection]"===o)for(var i=0,s=t.length;s>i;i++)r.add(ft(t.item(i),e,n));else t&&r.add(new lt(t,e,n));return r}function dt(t,e,n){return new Ss(function(r){function o(t,e){if(h[e]=t,s[e]=!0,u||(u=s.every(Kt))){if(i)return r.onError(i);var o=re(n).apply(null,h);if(o===ne)return r.onError(o.e);r.onNext(o)}c&&h[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,c=!1,h=new Array(2);return new vn(t.subscribe(function(t){o(t,0)},function(t){h[1]?r.onError(t):i=t},function(){c=!0,h[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){c=!0,o(!0,1)}))},t)}function V(t){return t.toArray()}function vt(t,e){return t.groupJoin(this,e,vr,function(t,e){return e})}function bt(t){var e=this;return new Ss(function(n){var r=new Rs,o=new on,i=new _n(o);return n.onNext(en(r,i)),o.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),te(t)&&(t=hr(t)),o.add(t.subscribe(function(t){r.onCompleted(),r=new Rs,n.onNext(en(r,i))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),i},e)}function _t(t){var e=this;return new Ss(function(n){function r(){var e;try{e=t()}catch(i){return void n.onError(i)}te(e)&&(e=hr(e));var c=new fn;o.setDisposable(c),c.setDisposable(e.take(1).subscribe(Zt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new Rs,n.onNext(en(u,s)),r()}))}var o=new dn,i=new on(o),s=new _n(i),u=new Rs;return n.onNext(en(u,s)),i.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function mt(t,e){return new Qi(t,e)}function U(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function yt(t){this.patterns=t}function gt(t,e){this.expression=t,this.selector=e}function wt(t){return function(e){t.onError(e)}}function xt(t,e){return function(){var n=re(t.selector).apply(t,arguments);return n===ne?e.onError(n.e):void e.onNext(n)}}function Et(t,e,n){var r=t.get(e);if(!r){var o=new $i(e,n);return t.set(e,o),o}return r}function Ct(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Hi;for(var r=0,o=this.joinObserverArray.length;o>r;r++){var i=this.joinObserverArray[r];this.joinObservers.set(i,i)}}function kt(t,e){return new Zi(t,e)}function At(t,e,n){return new Ss(function(r){var o=t,i=gn(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function Dt(t,e,n){return t===e?new Ss(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):lr(function(){return At(new Date(n.now()+t),e,n)})}function Nt(t,e,n){return new Ss(function(r){var o,i=!1,s=new dn,u=null,c=[],h=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,a;"E"===t.value.kind?(c=[],c.push(t),u=t.value.error,a=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),a=!i,i=!0),a&&(null!==u?r.onError(u):(o=new fn,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,a,p;if(null===u){h=!0;do a=null,c.length>0&&c[0].timestamp-n.now()<=0&&(a=c.shift().value),null!==a&&a.accept(r);while(null!==a);p=!1,s=0,c.length>0?(p=!0,s=Math.max(0,c[0].timestamp-n.now())):i=!1,o=u,h=!1,null!==o?r.onError(o):p&&e(null,s)}}))))}),new vn(o,s)},t)}function St(t,e,n){return lr(function(){return Nt(t,e-n.now(),n)})}function Ot(t,e,n){var r,o;return ee(e)?o=e:(r=e,o=n),new Ss(function(e){function n(){c.setDisposable(t.subscribe(function(t){var n=re(o)(t);if(n===ne)return e.onError(n.e);var r=new fn;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),i()}))},function(t){e.onError(t)},function(){u=!0,c.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new on,u=!1,c=new dn;return r?c.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new vn(c,s)},t)}function jt(t,e){return new Ss(function(n){var r,o=!1,i=new dn,s=0,u=t.subscribe(function(t){var u=re(e)(t);if(u===ne)return n.onError(u.e);te(u)&&(u=hr(u)),o=!0,r=t,s++;var c=s,h=new fn;i.setDisposable(h),h.setDisposable(u.subscribe(function(){o&&s===c&&n.onNext(r),o=!1,h.dispose()},function(t){n.onError(t)},function(){o&&s===c&&n.onNext(r),o=!1,h.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new vn(u,i)},t)}function V(t){return t.toArray()}function V(t){return t.toArray()}function qt(t,e,n,r){return ee(e)&&(r=n,n=e,e=Cr()),Jn.isObservable(r)||(r=Or(new is)),new Ss(function(o){function i(t){function e(){return p=n===a}var n=a,i=new fn;c.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(r.subscribe(o))}))}function s(){var t=!p;return t&&a++,t}var u=new dn,c=new dn,h=new fn;u.setDisposable(h);var a=0,p=!1;return i(e),h.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=re(n)(t);if(e===ne)return o.onError(e.e);i(te(e)?hr(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new vn(u,c)},t)}function Rt(t,e,n,r){return wn(n)&&(r=n,n=Or(new is)),n instanceof Error&&(n=Or(n)),wn(r)||(r=Rn),Jn.isObservable(n)||(n=Or(new is)),new Ss(function(o){function i(){var t=s;a.setDisposable(r.scheduleFuture(null,e,function(){h=s===t,h&&(te(n)&&(n=hr(n)),c.setDisposable(n.subscribe(o)))}))}var s=0,u=new fn,c=new dn,h=!1,a=new dn;return c.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){h||(s++,o.onNext(t),i())},function(t){h||(s++,o.onError(t))},function(){h||(s++,o.onCompleted())})),new vn(c,a)},t)}function Pt(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function zt(t){this.predicate=t}function Ft(t){this.predicate=t}function Tt(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,o=this.messages.length;o>r;r++){var i=this.messages[r],s=i.value;!function(e){t.scheduleAbsolute(null,i.time,function(){for(var t=n.observers.slice(0),r=0,o=t.length;o>r;r++)e.accept(t[r]);return hn})}(s)}}var It={"function":!0,object:!0},Qt=It[typeof r]&&r&&!r.nodeType?r:null,Mt=It[typeof n]&&n&&!n.nodeType?n:null,Lt=s(Qt&&Mt&&"object"==typeof o&&o),Ut=s(It[typeof self]&&self),Bt=s(It[typeof window]&&window),Wt=Mt&&Mt.exports===Qt?Qt:null,Vt=s(It[typeof this]&&this),Ht=Lt||Bt!==(Vt&&Vt.window)&&Bt||Ut||Vt||Function("return this")(),$t={internals:{},config:{Promise:Ht.Promise},helpers:{}},Zt=$t.helpers.noop=function(){},Kt=$t.helpers.identity=function(t){return t},Jt=$t.helpers.defaultNow=Date.now,Gt=$t.helpers.defaultComparer=function(t,e){return Xe(t,e)},Xt=$t.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},Yt=($t.helpers.defaultKeySerializer=function(t){return t.toString()},$t.helpers.defaultError=function(t){throw t}),te=$t.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},ee=$t.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),ne={e:{}},re=$t.internals.tryCatch=function(t){if(!ee(t))throw new TypeError("fn must be a function");return c(t)};$t.config.longStackSupport=!1;var oe=!1,ie=re(function(){throw new Error})();oe=!!ie.e&&!!ie.e.stack;var se,ue=d(),ce="From previous event:",he=$t.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};he.prototype=Object.create(Error.prototype),he.prototype.name="EmptyError";var ae=$t.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ae.prototype=Object.create(Error.prototype),ae.prototype.name="ObjectDisposedError";var pe=$t.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};pe.prototype=Object.create(Error.prototype),pe.prototype.name="ArgumentOutOfRangeError";var le=$t.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};le.prototype=Object.create(Error.prototype),le.prototype.name="NotSupportedError";var fe=$t.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};fe.prototype=Object.create(Error.prototype),fe.prototype.name="NotImplementedError";var de=$t.helpers.notImplemented=function(){throw new fe},ve=($t.helpers.notSupported=function(){throw new le},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Ht.Set&&"function"==typeof(new Ht.Set)["@@iterator"]&&(ve="@@iterator");var be=$t.doneEnumerator={done:!0,value:i},_e=$t.helpers.isIterable=function(t){return t&&t[ve]!==i},me=$t.helpers.isArrayLike=function(t){return t&&t.length!==i};$t.helpers.iterator=ve;var ye=$t.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},ge=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],we=(ge.length,"[object Arguments]"),xe="[object Array]",Ee="[object Boolean]",Ce="[object Date]",ke="[object Error]",Ae="[object Function]",De="[object Map]",Ne="[object Number]",Se="[object Object]",Oe="[object RegExp]",je="[object Set]",qe="[object String]",Re="[object WeakMap]",Pe="[object ArrayBuffer]",ze="[object Float32Array]",Fe="[object Float64Array]",Te="[object Int8Array]",Ie="[object Int16Array]",Qe="[object Int32Array]",Me="[object Uint8Array]",Le="[object Uint8ClampedArray]",Ue="[object Uint16Array]",Be="[object Uint32Array]",We={};We[ze]=We[Fe]=We[Te]=We[Ie]=We[Qe]=We[Me]=We[Le]=We[Ue]=We[Be]=!0,We[we]=We[xe]=We[Pe]=We[Ee]=We[Ce]=We[ke]=We[Ae]=We[De]=We[Ne]=We[Se]=We[Oe]=We[je]=We[qe]=We[Re]=!1;var Ve=Object.prototype,He=Ve.hasOwnProperty,$e=Ve.toString,Ze=Math.pow(2,53)-1,Ke=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;r>s;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),st=$t.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Je=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Ge=Array.isArray||function(t){return m(t)&&y(t.length)&&$e.call(t)===xe},Xe=$t.internals.isEqual=function(t,e){return C(t,e)},Ye=({}.hasOwnProperty,Array.prototype.slice,$t.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),tn=$t.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var o=0,i=e.length;i>o;o++){var s=e[o];for(var u in s)t[u]=s[u]}},en=$t.internals.addRef=function(t,e){return new Ss(function(n){return new vn(e.getDisposable(),t.subscribe(n))})};A.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var nn=$t.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},rn=nn.prototype;rn.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},rn.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},rn.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},rn.peek=function(){return this.items[0].value},rn.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=i,this.heapify()},rn.dequeue=function(){var t=this.peek();return this.removeAt(0),t},rn.enqueue=function(t){var e=this.length++;this.items[e]=new A(nn.count++,t),this.percolate(e)},rn.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},nn.count=0;var on=$t.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},sn=on.prototype;sn.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},sn.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},sn.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var un=$t.Disposable=function(t){this.isDisposed=!1,this.action=t||Zt};un.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var cn=un.create=function(t){return new un(t)},hn=un.empty={dispose:Zt},an=un.isDisposable=function(t){return t&&ee(t.dispose)},pn=un.checkDisposed=function(t){if(t.isDisposed)throw new ae},ln=un._fixup=function(t){return an(t)?t:hn},fn=$t.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};fn.prototype.getDisposable=function(){return this.current},fn.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},fn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var dn=$t.SerialDisposable=function(){this.isDisposed=!1,this.current=null};dn.prototype.getDisposable=function(){return this.current},dn.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},dn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var vn=$t.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};vn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var bn=$t.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};bn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var _n=$t.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?hn:new t(this)},e}();D.prototype.dispose=function(){this.scheduler.schedule(this,N)};var mn=$t.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||Xt,this.disposable=new fn};mn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},mn.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},mn.prototype.isCancelled=function(){return this.disposable.isDisposed},mn.prototype.invokeCore=function(){return ln(this.action(this.scheduler,this.state))};var yn=$t.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new fe},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new fe},t.now=Jt,t.prototype.now=Jt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),gn=yn.normalize,wn=yn.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(c):u=!0,o(e,n),hn}var s=!1,u=!1,c=t.schedule(e,r);u||(i.add(c),s=!0)}var r=e[0],o=e[1],i=new on;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(h):c=!0,o(e,n),hn}var u=!1,c=!1,h=t.scheduleFuture(e,r,s);
c||(i.add(h),u=!0)}var r=e[0],o=e[1],i=new on;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(yn.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof Ht.setInterval)throw new le;e=gn(e);var r=t,o=Ht.setInterval(function(){r=n(r)},e);return cn(function(){Ht.clearInterval(o)})}}(yn.prototype),function(t){t.catchError=t["catch"]=function(t){return new Pn(this,t)}}(yn.prototype);var xn,En,Cn=$t.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=re(t._action)(t._state);r===ne&&(t._cancel.dispose(),h(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new fn;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),kn=function(t){function e(){t.call(this)}return Ye(e,t),e.prototype.schedule=function(t,e){return ln(e(this,t))},e}(yn),An=yn.immediate=new kn,Dn=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Ye(n,t),n.prototype.schedule=function(t,n){var o=new mn(this,t,n,this.now());if(r)r.enqueue(o);else{r=new nn(4),r.enqueue(o);var i=re(e)();r=null,i===ne&&h(i.e)}return o.disposable},n.prototype.scheduleRequired=function(){return!r},n}(yn),Nn=yn.currentThread=new Dn,Sn=function(){var t,e=Zt;if(Ht.setTimeout)t=Ht.setTimeout,e=Ht.clearTimeout;else{if(!Ht.WScript)throw new le;t=function(t,e){Ht.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),On=Sn.setTimeout,jn=Sn.clearTimeout;!function(){function t(e){if(i)On(function(){t(e)},0);else{var n=o[e];if(n){i=!0;var r=re(n)();En(e),i=!1,r===ne&&h(r.e)}}}function n(){if(!Ht.postMessage||Ht.importScripts)return!1;var t=!1,e=Ht.onmessage;return Ht.onmessage=function(){t=!0},Ht.postMessage("","*"),Ht.onmessage=e,t}var r=1,o={},i=!1;En=function(t){delete o[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=Lt&&Wt&&Lt.setImmediate)&&!s.test(u)&&u;if(ee(u))xn=function(e){var n=r++;return o[n]=e,u(function(){t(n)}),n};else if("undefined"!=typeof e&&"[object process]"==={}.toString.call(e))xn=function(n){var i=r++;return o[i]=n,e.nextTick(function(){t(i)}),i};else if(n()){var c="ms.rx.schedule"+Math.random(),a=function(e){"string"==typeof e.data&&e.data.substring(0,c.length)===c&&t(e.data.substring(c.length))};Ht.addEventListener("message",a,!1),xn=function(t){var e=r++;return o[e]=t,Ht.postMessage(c+e,"*"),e}}else if(Ht.MessageChannel){var p=new Ht.MessageChannel;p.port1.onmessage=function(e){t(e.data)},xn=function(t){var e=r++;return o[e]=t,p.port2.postMessage(e),e}}else xn="document"in Ht&&"onreadystatechange"in Ht.document.createElement("script")?function(e){var n=Ht.document.createElement("script"),i=r++;return o[i]=e,n.onreadystatechange=function(){t(i),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},Ht.document.documentElement.appendChild(n),i}:function(e){var n=r++;return o[n]=e,On(function(){t(n)},0),n}}();var qn=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(un._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}function i(t,e,n){return function(){e(t,n)}}return Ye(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,En(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,jn(this._id))},e.prototype.schedule=function(t,e){var o=new fn,i=xn(n(o,e,this,t));return new vn(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new fn,s=On(n(i,r,this,t),e);return new vn(i,new o(s))},e.prototype.scheduleLongRunning=function(t,e){var n=cn(Zt);return xn(i(t,e,n)),n},e}(yn),Rn=yn["default"]=yn.async=new qn,Pn=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return Ye(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var o=re(t)(e._getRecursiveWrapper(n),r);return o===ne?(e._handler(o.e)||h(o.e),hn):ln(o)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,o=!1,i=new fn;return i.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(o)return null;var e=re(n)(t);return e===ne?(o=!0,r._handler(e.e)||h(e.e),i.dispose(),null):e})),i},e}(yn),zn=$t.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new fe},t.prototype._acceptObserver=function(t,e,n){throw new fe},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return wn(t)||(t=An),new Ss(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),Fn=function(t){function e(t){this.value=t,this.kind="N"}return Ye(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(zn),Tn=function(t){function e(t){this.error=t,this.kind="E"}return Ye(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(zn),In=function(t){function e(){this.kind="C"}return Ye(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(zn),Qn=zn.createOnNext=function(t){return new Fn(t)},Mn=zn.createOnError=function(t){return new Tn(t)},Ln=zn.createOnCompleted=function(){return new In},Un=$t.Observer=function(){};Un.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},Un.prototype.asObserver=function(){var t=this;return new Hn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},Un.prototype.checked=function(){return new $n(this)};var Bn=Un.create=function(t,e,n){return t||(t=Zt),e||(e=Yt),n||(n=Zt),new Hn(t,e,n)};Un.fromNotifier=function(t,e){var n=ye(t,e,1);return new Hn(function(t){return n(Qn(t))},function(t){return n(Mn(t))},function(){return n(Ln())})},Un.prototype.notifyOn=function(t){return new Kn(t,this)},Un.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Wn,Vn=$t.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Ye(e,t),e.prototype.next=de,e.prototype.error=de,e.prototype.completed=de,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(Un),Hn=$t.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Ye(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Vn),$n=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Ye(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=re(this._observer.onNext).call(this._observer,t);this._state=0,e===ne&&h(e.e)},n.onError=function(t){this.checkAccess();var e=re(this._observer.onError).call(this._observer,t);this._state=2,e===ne&&h(e.e)},n.onCompleted=function(){this.checkAccess();var t=re(this._observer.onCompleted).call(this._observer);this._state=2,t===ne&&h(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(Un),Zn=$t.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new dn}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=re(n)();return r===ne?(t.queue=[],t.hasFaulted=!0,h(r.e)):void e(t)}return Ye(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Vn),Kn=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Ye(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Zn),Jn=$t.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){a(e,t),r.call(n,e)},e.call(t,n)}}function e(){if($t.config.longStackSupport&&oe){var e=this._subscribe,n=re(h)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Wn=e.prototype,e.isObservable=function(t){return t&&ee(t.subscribe)},Wn.subscribe=Wn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Bn(t,e,n))},Wn.subscribeOnNext=function(t,e){return this._subscribe(Bn("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Wn.subscribeOnError=function(t,e){return this._subscribe(Bn(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Wn.subscribeOnCompleted=function(t,e){return this._subscribe(Bn(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),Gn=$t.ObservableBase=function(t){function e(t){return t&&ee(t.dispose)?t:ee(t)?cn(t):hn}function n(t,n){var r=n[0],o=n[1],i=re(o.subscribeCore).call(o,r);i!==ne||r.fail(ne.e)||h(ne.e),r.setDisposable(e(i))}function r(){t.call(this)}return Ye(r,t),r.prototype._subscribe=function(t){var e=new Os(t),r=[e,this];return Nn.scheduleRequired()?Nn.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=de,r}(Jn),Xn=$t.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=ee(r)?r:null,this.selector=ye(ee(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Ye(n,Vn),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=re(this.selector)(t,e,this.source);return n===ne?this.o.onError(n.e):(te(n)&&(n=hr(n)),(me(n)||_e(n))&&(n=Jn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Gn),Yn=$t.internals.Enumerable=function(){};S.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var tr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=re(t.e.next).call(t.e);if(n===ne)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var o=n.value;te(o)&&(o=hr(o));var i=new fn;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r={isDisposed:!1,o:t,subscription:e,e:this.sources[ve]()},o=Nn.scheduleRecursive(r,n);return new bn([e,o,new S(r)])},Ye(r,Vn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Gn);Yn.prototype.concat=function(){return new tr(this)};var er=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=re(t.e.next).call(t.e);if(n===ne)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var o=n.value;te(o)&&(o=hr(o));var i=new fn;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r={isDisposed:!1,e:this.sources[ve](),subscription:e,lastError:null,o:t},o=Nn.scheduleRecursive(r,n);return new bn([e,o,new S(r)])},Ye(r,Vn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Gn);Yn.prototype.catchError=function(){return new er(this)};var nr=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Ye(e,t),e.prototype[ve]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?be:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Yn),rr=Yn.repeat=function(t,e){return new nr(t,e)},or=function(t){function e(t,e,n){this.s=t,this.fn=e?ye(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Ye(e,t),e.prototype[ve]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:be},e}(Yn),ir=Yn.of=function(t,e,n){return new or(t,e,n)},sr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Kn(this._s,t))},e}(Gn);Wn.observeOn=function(t){return new sr(this,t)};var ur=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];r.setDisposable(new D(t,n.subscribe(o)))}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new fn,r=new dn;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Gn);Wn.subscribeOn=function(t){return new ur(this,t)};var cr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new fn,o=this,i=this._p;return ee(i)&&(i=re(i)(),i===ne)?(t.onError(i.e),e):(i.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e)},e}(Gn),hr=Jn.fromPromise=function(t,e){return e||(e=Rn),new cr(t,e)};Wn.toPromise=function(t){if(t||(t=$t.config.Promise),!t)throw new le("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var ar=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Ye(n,Vn),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Gn);Wn.toArray=function(){return new ar(this)},Jn.create=function(t,e){return new Ss(t,e)};var pr=function(t){function e(e){this._f=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=re(this._f)();return e===ne?Or(e.e).subscribe(t):(te(e)&&(e=hr(e)),e.subscribe(t))},e}(Gn),lr=Jn.defer=function(t){return new pr(t)},fr=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),hn}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===An?r(null,t):this.scheduler.schedule(t,r)},e}(Gn),dr=new fr(An),vr=Jn.empty=function(t){return wn(t)||(t=An),t===An?dr:new fr(t)},br=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i=re(e.next).call(e);if(i===ne)return t.onError(i.e);if(i.done)return t.onCompleted();var s=i.value;return ee(n)&&(s=re(n)(s,r),s===ne)?t.onError(s.e):(t.onNext(s),void o(r+1))}}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=z(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Gn),_r=Math.pow(2,53)-1;O.prototype[ve]=function(){return new j(this._s)},j.prototype[ve]=function(){return this},j.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:be},q.prototype[ve]=function(){return new R(this._a)},R.prototype[ve]=function(){return this},R.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:be};var mr=Jn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!ee(e))throw new Error("mapFn when provided must be a function");if(e)var o=ye(e,n,2);return wn(r)||(r=Nn),new br(t,o,r)},yr=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){n>r?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Gn),gr=Jn.fromArray=function(t,e){return wn(e)||(e=Nn),new yr(t,e)},wr=function(t){function e(e,n,r,o,i){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._s=i,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=re(t.self._itrFn)(t.newState),t.newState===ne)return t.o.onError(t.newState.e);var n=re(t.self._cndFn)(t.newState);if(n===ne)return t.o.onError(n.e);if(n){var r=re(t.self._resFn)(t.newState);if(r===ne)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return Ye(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Gn);Jn.generate=function(t,e,n,r,o){return wn(o)||(o=Nn),new wr(t,e,n,r,o)},Jn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new yr(e,Nn)},Jn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new yr(n,t)},Jn.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Ss(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Jn.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Ss(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var xr=function(t){function e(){t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return hn},e}(Gn),Er=new xr,Cr=Jn.never=function(){return Er},kr=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Gn);Jn.pairs=function(t,e){return e||(e=Nn),new kr(t,e)};var Ar=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){e>r?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Gn);Jn.range=function(t,e,n){return wn(n)||(n=Nn),new Ar(t,e,n)};var Dr=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new Q(t,this);return e.run()},e}(Gn);Q.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Jn.repeat=function(t,e,n){return wn(n)||(n=Nn),new Dr(t,e,n)};var Nr=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),hn}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===An?n(null,e):this._scheduler.schedule(e,n)},e}(Gn),Sr=(Jn["return"]=Jn.just=function(t,e){return wn(e)||(e=An),new Nr(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),hn}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===An?n(null,e):this._scheduler.schedule(e,n)},e}(Gn)),Or=Jn["throw"]=function(t,e){return wn(e)||(e=An),new Sr(t,e)},jr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=hn,n=re(this._resFn)();if(n===ne)return new vn(Or(n.e).subscribe(t),e);n&&(e=n);var r=re(this._obsFn)(n);return r===ne?new vn(Or(r.e).subscribe(t),e):new vn(r.subscribe(t),e)},e}(Gn);Jn.using=function(t,e){return new jr(t,e)},Wn.amb=function(t){var e=this;return new Ss(function(n){function r(){i||(i=s,h.dispose())}function o(){i||(i=u,c.dispose())}var i,s="L",u="R",c=new fn,h=new fn;te(t)&&(t=hr(t));var a=Bn(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()}),p=Bn(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()});return c.setDisposable(e.subscribe(a)),h.setDisposable(t.subscribe(p)),new vn(c,h)})},Jn.amb=function(){var t,e=Cr();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;n>r;r++)t[r]=arguments[r]}for(var r=0,n=t.length;n>r;r++)e=M(e,t[r]);return e};var qr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new fn,n=new dn;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Rr(t,n,this._fn))),n},e}(Gn),Rr=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=re(this._fn)(t);if(e===ne)return this._o.onError(e.e);te(e)&&(e=hr(e));var n=new fn;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(Vn);Wn["catch"]=function(t){return ee(t)?new qr(this,t):Pr([this,t])};var Pr=Jn["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return ir(t).catchError()};Wn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Tr.apply(this,e)};var zr=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:k(e,L),hasValueAll:!1,isDone:k(e,L),values:new Array(e)},o=0;e>o;o++){var i=this._params[o],s=new fn;n[o]=s,te(i)&&(i=hr(i)),s.setDisposable(i.subscribe(new Fr(t,o,this._cb,r)))}return new bn(n)},e}(Gn),Fr=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return Ye(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Kt))){var e=re(this._cb).apply(null,this._state.values);if(e===ne)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(Kt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Kt)&&this._o.onCompleted()},e}(Vn),Tr=Jn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():U;return Array.isArray(e[0])&&(e=e[0]),new zr(e,r)};Wn.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),Mr.apply(null,t)};var Ir=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Vn),Qr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];te(n)&&(n=hr(n));var r=new fn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Ir(t,e)))}}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r=cn(Zt),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=An.scheduleRecursive(o,n);return new bn([e,r,i])},e}(Gn),Mr=Jn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new Qr(t)};Wn.concatAll=function(){return this.merge(1)};var Lr=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new on;return e.add(this.source.subscribe(new Ur(t,this.maxConcurrent,e))),e},e}(Gn),Ur=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ye(e,t),e.prototype.handleSubscribe=function(t){var e=new fn;this.g.add(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Ye(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Vn);Wn.merge=function(t){return"number"!=typeof t?Br(this,t):new Lr(this,t)};var Br=Jn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(wn(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=An,e=0;r>e;e++)n.push(arguments[e]);else for(t=An,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),I(t,n).mergeAll()},Wr=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new on,n=new fn;return e.add(n),n.setDisposable(this.source.subscribe(new Vr(t,e))),e},e}(Gn),Vr=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=new fn;this.g.add(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Ye(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Vn);Wn.mergeAll=function(){return new Wr(this)};var Hr=$t.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Hr.prototype=Object.create(Error.prototype),Hr.prototype.name="CompositeError";var $r=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new on,n=new fn,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Zr(e,r))),e},e}(Gn),Zr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Hr(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=new fn;this._group.add(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Ye(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Vn);Jn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=I(null,t);return new $r(r)},Wn.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Gr([this,t])};var Kr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];te(n)&&(n=hr(n));var r=new fn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Jr(t,e)))}else t.o.onCompleted()}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r={pos:0,subscription:e,o:t,sources:this.sources},o=An.scheduleRecursive(r,n);return new vn(e,o)},e}(Gn),Jr=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(Vn),Gr=Jn.onErrorResumeNext=function(){
var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Kr(t)},Xr=function(t){function e(e,n){this._s=e,this._o=te(n)?hr(n):n,this._open=!1,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new fn;e.setDisposable(this._s.subscribe(new Yr(t,this))),te(this._o)&&(this._o=hr(this._o));var n=new fn;return n.setDisposable(this._o.subscribe(new to(t,this,n))),new vn(e,n)},e}(Gn),Yr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Vn),to=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Ye(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Vn);Wn.skipUntil=function(t){return new Xr(this,t)};var eo=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Vn.call(this)}function r(t,e){this.parent=t,this.id=e,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r=this.source.subscribe(new n(t,e));return new vn(r,e)},Ye(n,Vn),n.prototype.next=function(t){var e=new fn,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Ye(r,Vn),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Gn);Wn["switch"]=Wn.switchLatest=function(){return new eo(this)};var no=function(t){function e(e,n){this.source=e,this.other=te(n)?hr(n):n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return new vn(this.source.subscribe(t),this.other.subscribe(new ro(t)))},e}(Gn),ro=function(t){function e(e){this._o=e,t.call(this)}return Ye(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=Zt,e}(Vn);Wn.takeUntil=function(t){return new no(this,t)};var oo=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:k(e,L),hasValueAll:!1,values:new Array(e)},r=this._ss.length,o=new Array(r+1),i=0;r>i;i++){var s=this._ss[i],u=new fn;te(s)&&(s=hr(s)),u.setDisposable(s.subscribe(new io(t,i,n))),o[i]=u}var c=new fn;return c.setDisposable(this._s.subscribe(new so(t,this._cb,n))),o[r]=c,new bn(o)},e}(Gn),io=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Kt)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=Zt,e}(Vn),so=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=re(this._cb).apply(null,e);return n===ne?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():U;return Array.isArray(e[0])&&(e=e[0]),new oo(this,e,r)};var uo=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=k(e,L),o=k(e,B),i=0;e>i;i++){var s=this._s[i],u=new fn;n[i]=u,te(s)&&(s=hr(s)),u.setDisposable(s.subscribe(new co(t,i,this,o,r)))}return new bn(n)},e}(Gn),co=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ye(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=re(this._p._cb).apply(null,e);if(i===ne)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(Kt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Kt)&&this._o.onCompleted()},e}(Vn);Wn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():U;Array.isArray(e[0])&&(e=e[0]);var o=this;return e.unshift(o),new uo(e,r)},Jn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=ee(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var ho=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),o={q:k(n,B),done:k(n,L),cb:this._cb,o:t},i=0;n>i;i++)!function(t){var n=e[t],i=new fn;(me(n)||_e(n))&&(n=mr(n)),r[t]=i,i.setDisposable(n.subscribe(new ao(o,t)))}(i);return new bn(r)},e}(Gn),ao=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ye(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=re(this._s.cb).apply(null,e);if(i===ne)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(Kt)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Kt)&&this._s.o.onCompleted()},e}(Vn);Wn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():U,o=this;return e.unshift(o),new ho(e,r)},Wn.asObservable=function(){return new Ss(W(this),this)},Wn.bufferWithCount=Wn.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(V).filter(H)};var po=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lo(t))},e}(Gn),lo=function(t){function e(e){this._o=e,t.call(this)}return Ye(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.dematerialize=function(){return new po(this)};var fo=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vo(t,this.keyFn,this.comparer))},e}(Gn),vo=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e,n=t;return ee(this.keyFn)&&(n=re(this.keyFn)(t),n===ne)?this.o.onError(n.e):this.hasCurrentKey&&(e=re(this.comparer)(this.currentKey,n),e===ne)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Vn);Wn.distinctUntilChanged=function(t,e){return e||(e=Gt),new fo(this,t,e)};var bo=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||ee(e._oN)?Bn(e._oN||Zt,e._oE||Zt,e._oC||Zt):e._oN,this.isStopped=!1,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Ye(n,Vn),n.prototype.next=function(t){var e=re(this.t.onNext).call(this.t,t);e===ne&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=re(this.t.onError).call(this.t,t);return e===ne?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=re(this.t.onCompleted).call(this.t);return t===ne?this.o.onError(t.e):void this.o.onCompleted()},e}(Gn);Wn["do"]=Wn.tap=Wn.doAction=function(t,e,n){return new bo(this,t,e,n)},Wn.doOnNext=Wn.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Wn.doOnError=Wn.tapOnError=function(t,e){return this.tap(Zt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Wn.doOnCompleted=Wn.tapOnCompleted=function(t,e){return this.tap(Zt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var _o=function(t){function e(e,n,r){this.source=e,this._fn=ye(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=re(this.source.subscribe).call(this.source,t);return e===ne&&(this._fn(),h(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=re(this._s.dispose).call(this._s);this._fn(),t===ne&&h(t.e)}},e}(Gn);Wn["finally"]=function(t,e){return new _o(this,t,e)};var mo=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Zt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},e}(Gn);Wn.ignoreElements=function(){return new mo(this)};var yo=function(t){function e(e,n){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new go(t))},e}(Gn),go=function(t){function e(e){this._o=e,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._o.onNext(Qn(t))},e.prototype.error=function(t){this._o.onNext(Mn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(Ln()),this._o.onCompleted()},e}(Vn);Wn.materialize=function(){return new yo(this)},Wn.repeat=function(t){return rr(this,t).concat()},Wn.retry=function(t){return rr(this,t).catchError()};var wo=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Ye(n,t),n.prototype.subscribeCore=function(t){var n,r=new Rs,o=new Rs,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},h=new dn,a=Nn.scheduleRecursive(null,function(e,i){if(!c.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var a=s.value;te(a)&&(a=hr(a));var p=new fn,l=new fn;h.setDisposable(new vn(l,p)),p.setDisposable(a.subscribe(function(e){t.onNext(e)},function(e){l.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),p.dispose()},function(){t.onCompleted()}))}});return new bn([s,h,a,e(c)])},n}(Gn);Wn.retryWhen=function(t){return new wo($(this),t)};var xo=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Ye(n,t),n.prototype.subscribeCore=function(t){var n,r=new Rs,o=new Rs,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},h=new dn,a=Nn.scheduleRecursive(null,function(e,i){if(!c.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var a=s.value;te(a)&&(a=hr(a));var p=new fn,l=new fn;h.setDisposable(new vn(l,p)),p.setDisposable(a.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){l.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),p.dispose()}))}});return new bn([s,h,a,e(c)])},n}(Gn);Wn.repeatWhen=function(t){return new xo($(this),t)};var Eo=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Co(t,this))},e}(Gn),Co=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=re(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?re(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===ne?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Vn);Wn.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Eo(this,n,e,t)};var ko=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ao(t,this._c))},e}(Gn),Ao=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.skipLast=function(t){if(0>t)throw new pe;return new ko(this,t)},Wn.startWith=function(){var t,e=0;arguments.length&&wn(arguments[0])?(t=arguments[0],e=1):t=An;for(var n=[],r=e,o=arguments.length;o>r;r++)n.push(arguments[r]);return Mr.apply(null,[gr(n,t),this])};var Do=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Vn);Wn.takeLast=function(t){if(0>t)throw new pe;var e=this;return new Ss(function(n){return e.subscribe(new Do(n,t))},e)};var No=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(Vn);Wn.takeLastBuffer=function(t){if(0>t)throw new pe;var e=this;return new Ss(function(n){return e.subscribe(new No(n,t))},e)},Wn.windowWithCount=Wn.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new pe;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new pe;return new Ss(function(r){function o(){var t=new Rs;c.push(t),r.onNext(en(t,s))}var i=new fn,s=new _n(i),u=0,c=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=c.length;i>r;r++)c[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&c.shift().onCompleted(),++u%e===0&&o()},function(t){for(;c.length>0;)c.shift().onError(t);r.onError(t)},function(){for(;c.length>0;)c.shift().onCompleted();r.onCompleted()})),s},n)},Wn.selectConcat=Wn.concatMap=function(t,e,n){return ee(t)&&ee(e)?this.concatMap(function(n,r){var o=t(n,r);return te(o)&&(o=hr(o)),(me(o)||_e(o))&&(o=mr(o)),o.map(function(t,o){return e(n,t,r,o)})}):ee(t)?Z(this,t,n):Z(this,function(){return t})},Wn.concatMapObserver=Wn.selectConcatObserver=function(t,e,n,r){var o=this,i=ye(t,r,2),s=ye(e,r,1),u=ye(n,r,0);return new Ss(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(o){return void t.onError(o)}te(r)&&(r=hr(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}te(n)&&(n=hr(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}te(e)&&(e=hr(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var So=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(Vn);Wn.defaultIfEmpty=function(t){var e=this;return t===i&&(t=null),new Ss(function(n){return e.subscribe(new So(n,t))},e)},J.prototype.push=function(t){var e=-1===K(this.set,t,this.comparer);return e&&this.set.push(t),e};var Oo=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new jo(t,this._keyFn,this._cmpFn))},e}(Gn),jo=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new J(r),t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=t;return ee(this._keyFn)&&(e=re(this._keyFn)(t),e===ne)?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.distinct=function(t,e){return e||(e=Gt),new Oo(this,t,e)},Wn.groupBy=function(t,e){return this.groupByUntil(t,e,Cr)},Wn.groupByUntil=function(t,e,n){var r=this;return new Ss(function(o){var s=new Hi,u=new on,c=new _n(u),h=function(t){return function(e){e.onError(t)}};return u.add(r.subscribe(function(r){var a=re(t)(r);if(a===ne)return s.forEach(h(a.e)),o.onError(a.e);var p=!1,l=s.get(a);if(l===i&&(l=new Rs,s.set(a,l),p=!0),p){var f=new qs(a,l,c),d=new qs(a,l),v=re(n)(d);if(v===ne)return s.forEach(h(v.e)),o.onError(v.e);o.onNext(f);var b=new fn;u.add(b),b.setDisposable(v.take(1).subscribe(Zt,function(t){s.forEach(h(t)),o.onError(t)},function(){s["delete"](a)&&l.onCompleted(),u.remove(b)}))}var _=r;return ee(e)&&(_=re(e)(r),_===ne)?(s.forEach(h(_.e)),o.onError(_.e)):void l.onNext(_)},function(t){s.forEach(h(t)),o.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),o.onCompleted()})),c},r)};var qo=function(t){function e(e,n,r){this.source=e,this.selector=ye(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Vn.call(this)}return Ye(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Ye(r,Vn),r.prototype.next=function(t){var e=re(this.selector)(t,this.i++,this.source);return e===ne?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Gn);Wn.map=Wn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof qo?this.internalMap(n,e):new qo(this,n,e)},Wn.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;t>n;n++)e[n]=arguments[n];return this.map(G(e,t))},Wn.flatMap=Wn.selectMany=Wn.mergeMap=function(t,e,n){return new Xn(this,t,e,n).mergeAll()},Wn.flatMapObserver=Wn.selectManyObserver=function(t,e,n,r){var o=this;return new Ss(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(o){return void i.onError(o)}te(n)&&(n=hr(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(o){return void i.onError(o)}te(n)&&(n=hr(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void i.onError(e)}te(t)&&(t=hr(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},Wn.flatMapLatest=Wn.switchMap=function(t,e,n){return new Xn(this,t,e,n).switchLatest()};var Ro=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ye(n,Vn),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Gn);Wn.skip=function(t){if(0>t)throw new pe;return new Ro(this,t)};var Po=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new zo(t,this))},e}(Gn),zo=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Ye(e,t),e.prototype.next=function(t){if(!this._r){var e=re(this._p._fn)(t,this._i++,this._p);if(e===ne)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.skipWhile=function(t,e){var n=ye(t,e,3);return new Po(this,n)};var Fo=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ye(n,Vn),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Gn);Wn.take=function(t,e){if(0>t)throw new pe;return 0===t?vr(e):new Fo(this,t)};var To=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Io(t,this))},e}(Gn),Io=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){return this._r&&(this._r=re(this._p._fn)(t,this._i++,this._p),this._r===ne)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.takeWhile=function(t,e){var n=ye(t,e,3);return new To(this,n)};var Qo=function(t){function e(e,n,r){this.source=e,this.predicate=ye(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Vn.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Ye(r,Vn),r.prototype.next=function(t){var e=re(this.predicate)(t,this.i++,this.source);return e===ne?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Gn);Wn.filter=Wn.where=function(t,e){return this instanceof Qo?this.internalFilter(t,e):new Qo(this,t,e)};var Mo=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Lo(t,this._k,this._c))},e}(Gn),Lo=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=re(this._k)(t);if(e===ne)return this._o.onError(e.e);var n=0;if(this._hv){if(n=re(this._c)(e,this._v),n===ne)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(Vn),Uo=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Bo(t,this))},e}(Gn),Bo=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=re(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?re(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===ne?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new he),this._o.onCompleted()},e}(Vn);Wn.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Uo(this,n,e,t)};var Wo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vo(t,this._fn,this.source))},e}(Gn),Vo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=re(this._fn)(t,this._i++,this._s);return e===ne?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Vn);Wn.some=function(t,e){var n=ye(t,e,3);return new Wo(this,n)};var Ho=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new $o(t))},e}(Gn),$o=function(t){function e(e){this._o=e,t.call(this)}return Ye(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Vn);Wn.isEmpty=function(){return new Ho(this)};var Zo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ko(t,this._fn,this.source))},e}(Gn),Ko=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=re(this._fn)(t,this._i++,this._s);return e===ne?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Vn);Wn.every=function(t,e){var n=ye(t,e,3);return new Zo(this,n)};var Jo=function(t){function e(e,n,r){var o=+r||0;Math.abs(o)===1/0&&(o=0),this.source=e,this._elem=n,this._n=o,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),hn):this.source.subscribe(new Go(t,this._elem,this._n))},e}(Gn),Go=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}return Ye(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Vn);Wn.includes=function(t,e){return new Jo(this,t,e)};var Xo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Yo(t,this._fn,this.source))},e}(Gn),Yo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){if(this._fn){var e=re(this._fn)(t,this._i++,this._s);if(e===ne)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Vn);Wn.count=function(t,e){var n=ye(t,e,3);return new Xo(this,n)};var ti=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),hn):this.source.subscribe(new ei(t,this._e,this._n))},e}(Gn),ei=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(Vn);Wn.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new ti(this,t,n)};var ni=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ri(t,this._fn,this.source))},e}(Gn),ri=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){if(this._fn){var e=re(this._fn)(t,this._i++,this._s);if(e===ne)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Vn);Wn.sum=function(t,e){var n=ye(t,e,3);return new ni(this,n)},Wn.minBy=function(t,e){return e||(e=Xt),new Mo(this,t,function(t,n){return-1*e(t,n)})},Wn.min=function(t){return this.minBy(Kt,t).map(X)},Wn.maxBy=function(t,e){return e||(e=Xt),new Mo(this,t,e)},Wn.max=function(t){return this.maxBy(Kt,t).map(X)};var oi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ii(t,this._fn,this.source))},e}(Gn),ii=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){if(this._fn){var e=re(this._fn)(t,this._c++,this._s);if(e===ne)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new he):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(Vn);Wn.average=function(t,e){var n,r=this;return ee(t)&&(n=ye(t,e,3)),new oi(r,n)},Wn.sequenceEqual=function(t,e){var n=this;return e||(e=Gt),new Ss(function(r){var o=!1,i=!1,s=[],u=[],c=n.subscribe(function(t){if(u.length>0){var n=u.shift(),o=re(e)(n,t);if(o===ne)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(me(t)||_e(t))&&(t=mr(t)),te(t)&&(t=hr(t));var h=t.subscribe(function(t){if(s.length>0){var n=s.shift(),i=re(e)(n,t);if(i===ne)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new vn(c,h)},n)};var si=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ui(t,this._i,this._d))},e}(Gn),ui=function(t){function e(e,n,r){this._o=e,this._i=n,this._d=r,t.call(this)}return Ye(e,t),e.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d===i?this._o.onError(new pe):(this._o.onNext(this._d),this._o.onCompleted())},e}(Vn);Wn.elementAt=function(t,e){if(0>t)throw new pe;return new si(this,t,e);
};var ci=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=re(this._obj.predicate)(t,this._i++,this._s);if(n===ne)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new he):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Vn);Wn.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ee(n.predicate)){var o=n.predicate;n.predicate=ye(o,n.thisArg,3)}return new Ss(function(t){return r.subscribe(new ci(t,n,r))},r)};var hi=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ai(t,this._obj,this.source))},e}(Gn),ai=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){if(this._obj.predicate){var e=re(this._obj.predicate)(t,this._i++,this._s);if(e===ne)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._obj.defaultValue===i?this._o.onError(new he):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Vn);Wn.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ee(t.predicate)){var e=t.predicate;t.predicate=ye(e,t.thisArg,3)}return new hi(this,t)};var pi=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new li(t,this._obj,this.source))},e}(Gn),li=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=re(this._obj.predicate)(t,this._i++,this._s);if(n===ne)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new he):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Vn);Wn.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ee(t.predicate)){var e=t.predicate;t.predicate=ye(e,t.thisArg,3)}return new pi(this,t)};var fi=function(t){function e(e,n,r,o){this._o=e,this._s=n,this._cb=r,this._y=o,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=re(this._cb)(t,this._i,this._s);return e===ne?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(Vn);Wn.find=function(t,e){return Y(this,t,e,!1)},Wn.findIndex=function(t,e){return Y(this,t,e,!0)};var di=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vi(t))},e}(Gn),vi=function(t){function e(e){this._o=e,this._s=new Ht.Set,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(Vn);Wn.toSet=function(){if("undefined"==typeof Ht.Set)throw new TypeError;return new di(this)};var bi=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _i(t,this._k,this._e))},e}(Gn),_i=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new Ht.Map,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=re(this._k)(t);if(e===ne)return this._o.onError(e.e);var n=t;return this._e&&(n=re(this._e)(t),n===ne)?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(Vn);Wn.toMap=function(t,e){if("undefined"==typeof Ht.Map)throw new TypeError;return new bi(this,t,e)};var mi=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new yi(t,this._b,this._e))},e}(Gn),yi=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.slice=function(t,e){var n=t||0;if(0>n)throw new $t.ArgumentOutOfRangeError;if("number"==typeof e&&n>e)throw new $t.ArgumentOutOfRangeError;return new mi(this,n,e)};var gi=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),hn):this.source.subscribe(new wi(t,this._e,this._n))},e}(Gn),wi=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(Vn);Wn.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new gi(this,t,n)},Jn.wrap=function(t){function e(){return Jn.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var xi=Jn.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,o=arguments.length;o>r;r++)n.push(arguments[r]);return new Ss(function(r){function o(e){var n=re(t.next).call(t,e);return n===ne?r.onError(n.e):void s(n)}function i(e){var n=re(t.next).call(t,e);return n===ne?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=tt.call(e,t.value),s=null,c=!1;Jn.isObservable(n)?u.add(n.subscribe(function(t){c=!0,s=t},i,function(){c&&o(s)})):i(new TypeError("type not supported"))}var u=new on;return ee(t)&&(t=t.apply(e,n)),t&&ee(t.next)?(o(),u):(r.onNext(t),r.onCompleted())})};Jn.start=function(t,e,n){return Ei(t,e,n)()};var Ei=Jn.toAsync=function(t,e,n){return wn(n)||(n=Rn),function(){var r=arguments,o=new Ps;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(i){return void o.onError(i)}o.onNext(n),o.onCompleted()}),o.asObservable()}};Jn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return ut(t,e,n,o)}},Jn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return ht(t,e,n,o)}},lt.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},$t.config.useNativeEvents=!1;var Ci=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return ee(e)&&(n=re(e).apply(null,arguments),n===ne)?t.onError(n.e):void t.onNext(n)}}return Ye(e,t),e.prototype.subscribeCore=function(t){return ft(this._el,this._n,n(t,this._fn))},e}(Gn);Jn.fromEvent=function(t,e,n){return t.addListener?Ai(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):$t.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Ci(t,e,n).publish().refCount():Ai(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var ki=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return ee(e)&&(n=re(e).apply(null,arguments),n===ne)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(ee(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Gn),Ai=Jn.fromEventPattern=function(t,e,n){return new ki(t,e,n).publish().refCount()};Jn.startAsync=function(t){var e=re(t)();return e===ne?Or(e.e):hr(e)};var Di=function(t){function e(e,n){this.source=e,this.controller=new Rs,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ye(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=hn,o=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=hn)});return new bn([n,r,o])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Jn);Wn.pausable=function(t){return new Di(this,t)};var Ni=function(t){function e(e,n){this.source=e,this.controller=new Rs,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ye(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[],o=dt(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==i&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Jn);Wn.pausableBuffered=function(t){return new Ni(this,t)};var Si=function(t){function e(e,n,r){t.call(this),this.subject=new Oi(n,r),this.source=e.multicast(this.subject).refCount()}return Ye(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Jn),Oi=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Rs,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||Nn}return Ye(e,t),tn(e.prototype,Un,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(zn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(zn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(zn.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),o=e.hasCompleted||e.hasFailed;return!o&&r>0?(e.requestedCount=r,cn(function(){e.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Jn);Wn.controlled=function(t,e){return t&&wn(t)&&(e=t,t=!0),null==t&&(t=!0),new Si(this,t,e)};var ji=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}Ye(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new vn(this.subscription,Rn.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return Ye(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=Rn.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Vn);return e}(Jn);Si.prototype.stopAndWait=function(){return new ji(this)};var qi=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}Ye(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new vn(this.subscription,Rn.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return Ye(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Rn.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Vn);return e}(Jn);Si.prototype.windowed=function(t){return new qi(this,t)},Wn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var Ri=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new vn(this._fn2(e).subscribe(t),e.connect())},e}(Gn);Wn.multicast=function(t,e){return ee(t)?new Ri(this,t,e):new Fi(this,t)},Wn.publish=function(t){return t&&ee(t)?this.multicast(function(){return new Rs},t):this.multicast(new Rs)},Wn.share=function(){return this.publish().refCount()},Wn.publishLast=function(t){return t&&ee(t)?this.multicast(function(){return new Ps},t):this.multicast(new Ps)},Wn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new zs(e)},t):this.multicast(new zs(t))},Wn.shareValue=function(t){return this.publishValue(t).refCount()},Wn.replay=function(t,e,n,r){return t&&ee(t)?this.multicast(function(){return new Fs(e,n,r)},t):this.multicast(new Fs(e,n,r))},Wn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Pi=function(t,e){this._s=t,this._o=e};Pi.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var zi=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(Gn),Fi=$t.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Ye(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return hn;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new zi(this)},e}(Jn);Wn.singleInstance=function(){function t(){return r||(r=!0,e=n["finally"](function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new Ss(function(e){return t().subscribe(e)})},Wn.join=function(t,e,n,r){var o=this;return new Ss(function(i){var s=new on,u=!1,c=!1,h=0,a=0,p=new Hi,l=new Hi,f=function(t){i.onError(t)};return s.add(o.subscribe(function(t){var n=h++,o=new fn;p.set(n,t),s.add(o);var c=re(e)(t);return c===ne?i.onError(c.e):(o.setDisposable(c.take(1).subscribe(Zt,f,function(){p["delete"](n)&&0===p.size&&u&&i.onCompleted(),s.remove(o)})),void l.forEach(function(e){var n=re(r)(t,e);return n===ne?i.onError(n.e):void i.onNext(n)}))},f,function(){u=!0,(c||0===p.size)&&i.onCompleted()})),s.add(t.subscribe(function(t){var e=a++,o=new fn;l.set(e,t),s.add(o);var u=re(n)(t);return u===ne?i.onError(u.e):(o.setDisposable(u.take(1).subscribe(Zt,f,function(){l["delete"](e)&&0===l.size&&c&&i.onCompleted(),s.remove(o)})),void p.forEach(function(e){var n=re(r)(e,t);return n===ne?i.onError(n.e):void i.onNext(n)}))},f,function(){c=!0,(u||0===l.size)&&i.onCompleted()})),s},o)},Wn.groupJoin=function(t,e,n,r){var o=this;return new Ss(function(i){function s(t){}var u=new on,c=new _n(u),h=new Hi,a=new Hi,p=0,l=0,s=function(t){return function(e){e.onError(t)}};return u.add(o.subscribe(function(t){var n=new Rs,o=p++;h.set(o,n);var l=re(r)(t,en(n,c));if(l===ne)return h.forEach(s(l.e)),i.onError(l.e);i.onNext(l),a.forEach(function(t){n.onNext(t)});var f=new fn;u.add(f);var d=re(e)(t);return d===ne?(h.forEach(s(d.e)),i.onError(d.e)):void f.setDisposable(d.take(1).subscribe(Zt,function(t){h.forEach(s(t)),i.onError(t)},function(){h["delete"](o)&&n.onCompleted(),u.remove(f)}))},function(t){h.forEach(s(t)),i.onError(t)},function(){i.onCompleted()})),u.add(t.subscribe(function(t){var e=l++;a.set(e,t);var r=new fn;u.add(r);var o=re(n)(t);return o===ne?(h.forEach(s(o.e)),i.onError(o.e)):(r.setDisposable(o.take(1).subscribe(Zt,function(t){h.forEach(s(t)),i.onError(t)},function(){a["delete"](e),u.remove(r)})),void h.forEach(function(e){e.onNext(t)}))},function(t){h.forEach(s(t)),i.onError(t)})),c},o)},Wn.buffer=function(){return this.window.apply(this,arguments).flatMap(V)},Wn.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?bt.call(this,t):"function"==typeof t?_t.call(this,t):vt.call(this,t,e)};var Ti=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ii(t))},e}(Gn),Ii=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.pairwise=function(){return new Ti(this)},Wn.partition=function(t,e){var n=ye(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Qi=function(t){function e(t,e){this.c=t,this.s=e}return Ye(e,t),e.prototype[ve]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Yn);Wn.letBind=Wn.let=function(t){return t(this)},Jn["if"]=function(t,e,n){return lr(function(){return n||(n=vr()),te(e)&&(e=hr(e)),te(n)&&(n=hr(n)),"function"==typeof n.now&&(n=vr(n)),t()?e:n})},Jn["for"]=Jn.forIn=function(t,e,n){return ir(t,e,n).concat()};var Mi=Jn["while"]=Jn.whileDo=function(t,e){return te(e)&&(e=hr(e)),mt(t,e).concat()};Wn.doWhile=function(t){return Mr([this,Mi(t,this)])},Jn["case"]=function(t,e,n){return lr(function(){te(n)&&(n=hr(n)),n||(n=vr()),wn(n)&&(n=vr(n));var r=e[t()];return te(r)&&(r=hr(r)),r||n})};var Li=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],o=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var i=new fn;r.d.add(i),i.setDisposable(n.subscribe(new Ui(r,o,i))),e([r,o])}return Ye(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new dn,n=new on(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Gn),Ui=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=re(this._p._fn)(t);return e===ne?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(Vn);Wn.expand=function(t,e){return wn(e)||(e=Nn),new Li(this,t,e)};var Bi=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),hn;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new on,o=0,i=this._sources.length;i>o;o++){var s=this._sources[o];te(s)&&(s=hr(s)),r.add(s.subscribe(new Wi(t,n,o,this._cb,r)))}return r},e}(Gn),Wi=function(t){function e(e,n,r,o,i){this._o=e,this._s=n,this._i=r,this._cb=o,this._subs=i,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=re(this._cb).apply(null,this._s.results);if(e===ne)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(Vn);Jn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():U;return Array.isArray(e[0])&&(e=e[0]),new Bi(e,r)},Wn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Jn.forkJoin.apply(null,e)},Wn.manySelect=Wn.extend=function(t,e){wn(e)||(e=$t.Scheduler.immediate);var n=this;return lr(function(){var r;return n.map(function(t){var e=new Vi(t);return r&&r.onNext(t),r=e,e}).tap(Zt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Vi=function(t){function e(e){t.call(this),this.head=e,this.tail=new Ps}return Ye(e,t),tn(e.prototype,Un,{_subscribe:function(t){var e=new on;return e.add(Nn.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Jn.empty())},onError:function(t){this.onNext(Jn["throw"](t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Jn),Hi=Ht.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return-1===e?!1:(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?i:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();yt.prototype.and=function(t){return new yt(this.patterns.concat(t))},yt.prototype.thenDo=function(t){return new gt(this,t)},gt.prototype.activate=function(t,e,n){for(var r=[],o=wt(e),i=0,s=this.expression.patterns.length;s>i;i++)r.push(Et(t,this.expression.patterns[i],o));var u=new Ct(r,xt(this,e),function(){for(var t=0,e=r.length;e>t;t++)r[t].removeActivePlan(u);n(u)});for(i=0,s=r.length;s>i;i++)r[i].addActivePlan(u);return u},Ct.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},Ct.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],o=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(o=!0);if(o)this.onCompleted();else{this.dequeue();var i=[];for(t=0,e=r.length;t<r.length;t++)i.push(r[t].value);this.onNext.apply(this,i)}}};var $i=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new fn,this.isDisposed=!1}Ye(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=Zt,n.completed=Zt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(Vn);Wn.and=function(t){return new yt([this,t])},Wn.thenDo=function(t){return new yt([this]).thenDo(t)},Jn.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ss(function(e){var n=[],r=new Hi,o=Bn(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var i=0,s=t.length;s>i;i++)n.push(t[i].activate(r,o,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(u){return Or(u).subscribe(e)}var c=new on;return r.forEach(function(t){t.subscribe(),c.add(t)}),c})};var Zi=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Gn),Ki=Jn.interval=function(t,e){return Dt(t,t,wn(e)?e:Rn)};Jn.timer=function(t,e,n){var r;return wn(n)||(n=Rn),null!=e&&"number"==typeof e?r=e:wn(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===i?kt(t,n):t instanceof Date&&r!==i?At(t,e,n):Dt(t,r,n)};Wn.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return wn(n)||(n=Rn),e instanceof Date?St(this,e,n):Nt(this,e,n)}if(Jn.isObservable(t)||ee(t))return Ot(this,t,arguments[1]);throw new Error("Invalid arguments")};var Ji=function(t){function e(e,n,r){wn(r)||(r=Rn),this.source=e,this._dt=n,this._s=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn;return new vn(this.source.subscribe(new Gi(t,this._dt,this._s,e)),e)},e}(Gn),Gi=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new fn;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Vn);Wn.debounce=function(){if(ee(arguments[0]))return jt(this,arguments[0]);if("number"==typeof arguments[0])return new Ji(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Wn.windowWithTime=Wn.windowTime=function(t,e,n){var r,o=this;return null==e&&(r=t),wn(n)||(n=Rn),"number"==typeof e?r=e:wn(e)&&(r=t,n=e),new Ss(function(e){function i(){var t=new fn,o=!1,s=!1;p.setDisposable(t),h===c?(o=!0,s=!0):c>h?o=!0:s=!0;var f=o?h:c,d=f-l;l=f,o&&(h+=r),s&&(c+=r),t.setDisposable(n.scheduleFuture(null,d,function(){if(s){var t=new Rs;a.push(t),e.onNext(en(t,u))}o&&a.shift().onCompleted(),i()}))}var s,u,c=r,h=t,a=[],p=new dn,l=0;return s=new on(p),u=new _n(s),a.push(new Rs),e.onNext(en(a[0],u)),i(),s.add(o.subscribe(function(t){for(var e=0,n=a.length;n>e;e++)a[e].onNext(t)},function(t){for(var n=0,r=a.length;r>n;n++)a[n].onError(t);e.onError(t)},function(){for(var t=0,n=a.length;n>t;t++)a[t].onCompleted();e.onCompleted()})),u},o)},Wn.windowWithTimeOrCount=Wn.windowTimeOrCount=function(t,e,n){var r=this;return wn(n)||(n=Rn),new Ss(function(o){function i(e){var r=new fn;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===a){h=0;var t=++a;p.onCompleted(),p=new Rs,o.onNext(en(p,c)),i(t)}}))}var s=new dn,u=new on(s),c=new _n(u),h=0,a=0,p=new Rs;return o.onNext(en(p,c)),i(0),u.add(r.subscribe(function(t){var n=0,r=!1;p.onNext(t),++h===e&&(r=!0,h=0,n=++a,p.onCompleted(),p=new Rs,o.onNext(en(p,c))),r&&i(n)},function(t){p.onError(t),o.onError(t)},function(){p.onCompleted(),o.onCompleted()})),c},r)},Wn.bufferWithTime=Wn.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(V)},Wn.bufferWithTimeOrCount=Wn.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(V)};var Xi=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Yi(t,this._s))},e}(Gn),Yi=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.timeInterval=function(t){return wn(t)||(t=Rn),new Xi(this,t)};var ts=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new es(t,this._s))},e}(Gn),es=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.timestamp=function(t){return wn(t)||(t=Rn),new ts(this,t)};var ns=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new fn};return e.sourceSubscription.setDisposable(this.source.subscribe(new os(e))),new vn(e.sourceSubscription,this._sampler.subscribe(new rs(e)));
},e}(Gn),rs=function(t){function e(e){this._s=e,t.call(this)}return Ye(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Vn),os=function(t){function e(e){this._s=e,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Vn);Wn.sample=function(t,e){return wn(e)||(e=Rn),"number"==typeof t?new ns(this,Ki(t,e)):new ns(this,t)};var is=$t.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};is.prototype=Object.create(Error.prototype),Wn.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Rt(this,t,arguments[1],arguments[2]);if(Jn.isObservable(t)||ee(t))return qt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var ss=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=re(t.self._itrFn)(t.newState),t.newState===ne)return t.o.onError(t.newState.e);if(t.hasResult=re(t.self._cndFn)(t.newState),t.hasResult===ne)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=re(t.self._resFn)(t.newState),t.result===ne)return t.o.onError(t.result.e);var n=re(t.self._timeFn)(t.newState);if(n===ne)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Ye(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Gn);Jn.generateWithAbsoluteTime=function(t,e,n,r,o,i){return wn(i)||(i=Rn),new ss(t,e,n,r,o,i)};var us=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=re(t.self._itrFn)(t.newState),t.newState===ne)return t.o.onError(t.newState.e);if(t.hasResult=re(t.self._cndFn)(t.newState),t.hasResult===ne)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=re(t.self._resFn)(t.newState),t.result===ne)return t.o.onError(t.result.e);var n=re(t.self._timeFn)(t.newState);if(n===ne)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Ye(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Gn);Jn.generateWithRelativeTime=function(t,e,n,r,o,i){return wn(i)||(i=Rn),new us(t,e,n,r,o,i)};var cs=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];o.setDisposable(n.subscribe(r))}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new dn;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Gn);Wn.delaySubscription=function(t,e){return wn(e)||(e=Rn),new cs(this,t,e)};var hs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new as(t,this))},e}(Gn),as=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(Vn);Wn.skipLastWithTime=function(t,e){return wn(e)||(e=Rn),new hs(this,t,e)};var ps=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ls(t,this._d,this._s))},e}(Gn),ls=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(Vn);Wn.takeLastWithTime=function(t,e){return wn(e)||(e=Rn),new ps(this,t,e)},Wn.takeLastBufferWithTime=function(t,e){var n=this;return wn(e)||(e=Rn),new Ss(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),i=[];o.length>0;){var s=o.shift();n-s.interval<=t&&i.push(s.value)}r.onNext(i),r.onCompleted()})},n)};var fs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return Ye(e,t),e.prototype.subscribeCore=function(t){return new vn(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Gn);Wn.takeWithTime=function(t,e){return wn(e)||(e=Rn),new fs(this,t,e)};var ds=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return Ye(e,t),e.prototype.subscribeCore=function(t){return new vn(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new vs(t,this)))},e}(Gn),vs=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.skipWithTime=function(t,e){return wn(e)||(e=Rn),new ds(this,t,e)};var bs=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return Ye(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new vn(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new _s(t,this)))},e}(Gn),_s=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Wn.skipUntilWithTime=function(t,e){return wn(e)||(e=Rn),new bs(this,t,e)},Wn.takeUntilWithTime=function(t,e){wn(e)||(e=Rn);var n=this;return new Ss(function(r){return new vn(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},Wn.throttle=function(t,e){wn(e)||(e=Rn);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Ss(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var ms=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){var e=re(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===ne&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Vn);Wn.transduce=function(t){var e=this;return new Ss(function(n){var r=t(Pt(n));return e.subscribe(new ms(n,r))},e)};var ys=function(t){function e(e){this.source=e,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){var e=new fn,n=new on,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new gs(r))),n},e}(Gn),gs=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return Ye(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,te(t)&&(t=hr(t));var e=new fn;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},Ye(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(Vn);Wn.switchFirst=function(){return new ys(this)},Wn.flatMapFirst=Wn.exhaustMap=function(t,e,n){return new Xn(this,t,e,n).switchFirst()},Wn.flatMapWithMaxConcurrent=Wn.flatMapMaxConcurrent=function(t,e,n,r){return new Xn(this,e,n,r).merge(t)};var ws=$t.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new nn(1024),t.call(this)}Ye(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=de,n.toAbsoluteTime=de,n.toRelativeTime=de,n.schedulePeriodic=function(t,e,n){var r=new Cn(this,t,e,n);return r.start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new pe;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new pe;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new pe;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return o.queue.remove(i),n(t,e)}var o=this,i=new mn(this,t,r,e,this.comparer);return this.queue.enqueue(i),i.disposable},e}(yn);$t.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,o=n||Xt;t.call(this,r,o)}Ye(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}($t.VirtualTimeScheduler),zt.prototype.equals=function(t){return t===this?!0:null==t?!1:"N"!==t.kind?!1:this.predicate(t.value)},Ft.prototype.equals=function(t){return t===this?!0:null==t?!1:"E"!==t.kind?!1:this.predicate(t.error)};var xs=$t.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new Es(t,new zt(e)):new Es(t,zn.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new Es(t,new Ft(e)):new Es(t,zn.createOnError(e))},onCompleted:function(t){return new Es(t,zn.createOnCompleted())},subscribe:function(t,e){return new Cs(t,e)}},Es=$t.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Gt};Es.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},Es.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Cs=$t.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};Cs.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},Cs.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var ks=$t.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};ks.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var As=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}Ye(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new Es(this.scheduler.clock,zn.createOnNext(t)))},n.onError=function(t){this.messages.push(new Es(this.scheduler.clock,zn.createOnError(t)))},n.onCompleted=function(){this.messages.push(new Es(this.scheduler.clock,zn.createOnCompleted()))},e}(Un);Tt.prototype.then=function(t,e){var n=this;this.subscriptions.push(new Cs(this.scheduler.clock));var r,o=this.subscriptions.length-1,s=$t.Observer.create(function(e){var u=t(e);if(u&&"function"==typeof u.then)r=u;else{var c=n.scheduler.clock;r=new Tt(n.scheduler,[$t.ReactiveTest.onNext(c,i),$t.ReactiveTest.onCompleted(c)])}var h=n.observers.indexOf(s);n.observers.splice(h,1),n.subscriptions[o]=new Cs(n.subscriptions[o].subscribe,n.scheduler.clock)},function(t){e(t);var r=n.observers.indexOf(s);n.observers.splice(r,1),n.subscriptions[o]=new Cs(n.subscriptions[o].subscribe,n.scheduler.clock)});return this.observers.push(s),r||new Tt(this.scheduler,this.messages)};var Ds=function(t){function e(e,n){t.call(this);var r,o,i=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;u>s;s++)r=this.messages[s],o=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=i.observers.slice(0),n=0,r=e.length;r>n;n++)t.accept(e[n]);return hn})}(o)}return Ye(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new Cs(this.scheduler.clock));var n=this.subscriptions.length-1;return cn(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new Cs(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Jn),Ns=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return Ye(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new Cs(this.scheduler.clock));for(var o=this.subscriptions.length-1,i=new on,s=0,u=this.messages.length;u>s;s++)e=this.messages[s],n=e.value,function(n){i.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),hn}))}(n);return cn(function(){r.subscriptions[o]=new Cs(r.subscriptions[o].subscribe,r.scheduler.clock),i.dispose()})},e}(Jn);$t.TestScheduler=function(t){function e(t,e){return t>e?1:e>t?-1:0}function n(){t.call(this,0,e)}return Ye(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=xs.created),null==e.subscribed&&(e.subscribed=xs.subscribed),null==e.disposed&&(e.disposed=xs.disposed);var n,r,o=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),hn}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(o),hn}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),hn}),this.start(),o},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ds(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ns(this,t)},n.prototype.createResolvedPromise=function(t,e){return new Tt(this,[$t.ReactiveTest.onNext(t,e),$t.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new Tt(this,[$t.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new As(this)},n}(ws);var Ss=$t.AnonymousObservable=function(t){function e(t){return t&&ee(t.dispose)?t:ee(t)?cn(t):hn}function n(t,n){var r=n[0],o=n[1],i=re(o.__subscribe).call(o,r);i!==ne||r.fail(ne.e)||h(ne.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Ye(r,t),r.prototype._subscribe=function(t){var e=new Os(t),r=[e,this];return Nn.scheduleRequired()?Nn.schedule(r,n):n(null,r),e},r}(Jn),Os=function(t){function e(e){t.call(this),this.observer=e,this.m=new fn}Ye(e,t);var n=e.prototype;return n.next=function(t){var e=re(this.observer.onNext).call(this.observer,t);e===ne&&(this.dispose(),h(e.e))},n.error=function(t){var e=re(this.observer.onError).call(this.observer,t);this.dispose(),e===ne&&h(e.e)},n.completed=function(){var t=re(this.observer.onCompleted).call(this.observer);this.dispose(),t===ne&&h(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Vn),js=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return Ye(e,t),e.prototype.subscribeCore=function(t){return new vn(this._m.getDisposable(),this._u.subscribe(t))},e}(Gn),qs=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new js(r,n):n}return Ye(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Jn),Rs=$t.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Ye(e,t),tn(e.prototype,Un.prototype,{_subscribe:function(t){return pn(this),this.isStopped?this.hasError?(t.onError(this.error),hn):(t.onCompleted(),hn):(this.observers.push(t),new Pi(this,t))},hasObservers:function(){return pn(this),this.observers.length>0},onCompleted:function(){if(pn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(pn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(pn(this),!this.isStopped)for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Ts(t,e)},e}(Jn),Ps=$t.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Ye(e,t),tn(e.prototype,Un.prototype,{_subscribe:function(t){return pn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),hn):(this.observers.push(t),new Pi(this,t))},hasObservers:function(){return pn(this),this.observers.length>0},onCompleted:function(){var t,e;if(pn(this),!this.isStopped){this.isStopped=!0;var n=u(this.observers),e=n.length;if(this.hasValue)for(t=0;e>t;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;e>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(pn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){pn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Jn),zs=$t.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Ye(e,t),tn(e.prototype,Un.prototype,{_subscribe:function(t){return pn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),hn):(this.observers.push(t),t.onNext(this.value),new Pi(this,t))},getValue:function(){return pn(this),this.hasError&&h(this.error),this.value},hasObservers:function(){return pn(this),this.observers.length>0},onCompleted:function(){if(pn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(pn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(pn(this),!this.isStopped){this.value=t;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Jn),Fs=$t.ReplaySubject=function(t){function e(t,e){return cn(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||Nn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return Ye(n,t),tn(n.prototype,Un.prototype,{_subscribe:function(t){pn(this);var n=new Zn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var o=0,i=this.q.length;i>o;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return pn(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(pn(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=u(this.observers),o=r.length;o>n;n++){var i=r[n];i.onNext(t),i.ensureActive()}}},onError:function(t){if(pn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=u(this.observers),o=r.length;o>n;n++){var i=r[n];i.onError(t),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(pn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=u(this.observers),r=n.length;r>e;e++){var o=n[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Jn),Ts=$t.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Ye(e,t),tn(e.prototype,Un.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Jn);$t.Pauser=function(t){function e(){t.call(this)}return Ye(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Rs),"function"==typeof t&&"object"==typeof t.amd&&t.amd?(Ht.Rx=$t,t(function(){return $t})):Qt&&Mt?Wt?(Mt.exports=$t).Rx=$t:Qt.Rx=$t:Ht.Rx=$t;var Is=d()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],6:[function(e,n,r){!function(e,o){"use strict";"object"==typeof r?n.exports=o():"function"==typeof t&&t.amd?t(o):e.IPv6=o(e)}(this,function(t){"use strict";function e(t){var e=t.toLowerCase(),n=e.split(":"),r=n.length,o=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[r-1]&&""===n[r-2]&&n.pop(),r=n.length,-1!==n[r-1].indexOf(".")&&(o=7);var i;for(i=0;r>i&&""!==n[i];i++);if(o>i){for(n.splice(i,1,"0000");n.length<o;)n.splice(i,0,"0000");r=n.length}for(var s,u=0;o>u;u++){s=n[u].split("");for(var c=0;3>c&&("0"===s[0]&&s.length>1);c++)s.splice(0,1);n[u]=s.join("")}var h=-1,a=0,p=0,l=-1,f=!1;for(u=0;o>u;u++)f?"0"===n[u]?p+=1:(f=!1,p>a&&(h=l,a=p)):"0"===n[u]&&(f=!0,l=u,p=1);p>a&&(h=l,a=p),a>1&&n.splice(h,a,""),r=n.length;var d="";for(""===n[0]&&(d=":"),u=0;r>u&&(d+=n[u],u!==r-1);u++)d+=":";return""===n[r-1]&&(d+=":"),d}function n(){return t.IPv6===this&&(t.IPv6=r),this}var r=t&&t.IPv6;return{best:e,noConflict:n}})},{}],7:[function(e,n,r){!function(e,o){"use strict";"object"==typeof r?n.exports=o():"function"==typeof t&&t.amd?t(o):e.SecondLevelDomains=o(e)}(this,function(t){"use strict";var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return!1;var r=t.lastIndexOf(".",e-1);if(0>=r||r>=e-1)return!1;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(r+1,e)+" ")>=0:!1},is:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return!1;
var r=t.lastIndexOf(".",e-1);if(r>=0)return!1;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(0,e)+" ")>=0:!1},get:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return null;var r=t.lastIndexOf(".",e-1);if(0>=r||r>=e-1)return null;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(r+1,e)+" ")<0?null:t.slice(r+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n})},{}],8:[function(e,n,r){!function(o,i){"use strict";"object"==typeof r?n.exports=i(e("./punycode"),e("./IPv6"),e("./SecondLevelDomains")):"function"==typeof t&&t.amd?t(["./punycode","./IPv6","./SecondLevelDomains"],i):o.URI=i(o.punycode,o.IPv6,o.SecondLevelDomains,o)}(this,function(t,e,n,r){"use strict";function o(t,e){var n=arguments.length>=1,r=arguments.length>=2;if(!(this instanceof o))return n?r?new o(t,e):new o(t):new o;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}return this.href(t),void 0!==e?this.absoluteTo(e):this}function i(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function u(t){return"Array"===s(t)}function c(t,e){var n,r,o={};if("RegExp"===s(e))o=null;else if(u(e))for(n=0,r=e.length;r>n;n++)o[e[n]]=!0;else o[e]=!0;for(n=0,r=t.length;r>n;n++){var i=o&&void 0!==o[t[n]]||!o&&e.test(t[n]);i&&(t.splice(n,1),r--,n--)}return t}function h(t,e){var n,r;if(u(e)){for(n=0,r=e.length;r>n;n++)if(!h(t,e[n]))return!1;return!0}var o=s(e);for(n=0,r=t.length;r>n;n++)if("RegExp"===o){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function a(t,e){if(!u(t)||!u(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,r=t.length;r>n;n++)if(t[n]!==e[n])return!1;return!0}function p(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function l(t){return escape(t)}function f(t){return encodeURIComponent(t).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}function d(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function v(t,e){return function(n,r){return void 0===n?this._parts[t]||"":(null!==n&&(n+="",n.charAt(0)===e&&(n=n.substring(1))),this._parts[t]=n,this.build(!r),this)}}var b=r&&r.URI;o.version="1.17.1";var _=o.prototype,m=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return o.domAttributes[e]}},o.encode=f,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=f,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(t,e){var n=o.encode(t+"");return void 0===e&&(e=o.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},o.decodeQuery=function(t,e){t+="",void 0===e&&(e=o.escapeQuerySpace);try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}};var y,g={encode:"encode",decode:"decode"},w=function(t,e){return function(n){try{return o[e](n+"").replace(o.characters[t][e].expression,function(n){return o.characters[t][e].map[n]})}catch(r){return n}}};for(y in g)o[y+"PathSegment"]=w("pathname",g[y]),o[y+"UrnPathSegment"]=w("urnpath",g[y]);var x=function(t,e,n){return function(r){var i;i=n?function(t){return o[e](o[n](t))}:o[e];for(var s=(r+"").split(t),u=0,c=s.length;c>u;u++)s[u]=i(s[u]);return s.join(t)}};o.decodePath=x("/","decodePathSegment"),o.decodeUrnPath=x(":","decodeUrnPathSegment"),o.recodePath=x("/","encodePathSegment","decode"),o.recodeUrnPath=x(":","encodeUrnPathSegment","decode"),o.encodeReserved=w("reserved","encode"),o.parse=function(t,e){var n;return e||(e={}),n=t.indexOf("#"),n>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),n=t.indexOf("?"),n>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(n=t.indexOf(":"),n>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3)?(t=t.substring(n+3),t=o.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0))),e.path=t,e},o.parseHost=function(t,e){t=t.replace(/\\/g,"/");var n,r,o=t.indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,o)||null,"/"===e.port&&(e.port=null);else{var i=t.indexOf(":"),s=t.indexOf("/"),u=t.indexOf(":",i+1);-1!==u&&(-1===s||s>u)?(e.hostname=t.substring(0,o)||null,e.port=null):(r=t.substring(0,o).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),t.substring(o)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var n,r=t.indexOf("/"),i=t.lastIndexOf("@",r>-1?r:t.length-1);return i>-1&&(-1===r||r>i)?(n=t.substring(0,i).split(":"),e.username=n[0]?o.decode(n[0]):null,n.shift(),e.password=n[0]?o.decode(n.join(":")):null,t=t.substring(i+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,r,i,s={},u=t.split("&"),c=u.length,h=0;c>h;h++)n=u[h].split("="),r=o.decodeQuery(n.shift(),e),i=n.length?o.decodeQuery(n.join("="),e):null,m.call(s,r)?("string"!=typeof s[r]&&null!==s[r]||(s[r]=[s[r]]),s[r].push(i)):s[r]=i;return s},o.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(e+=o.ip6_expression.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username),t.password&&(e+=":"+o.encode(t.password)),e+="@"),e},o.buildQuery=function(t,e,n){var r,i,s,c,h="";for(i in t)if(m.call(t,i)&&i)if(u(t[i]))for(r={},s=0,c=t[i].length;c>s;s++)void 0!==t[i][s]&&void 0===r[t[i][s]+""]&&(h+="&"+o.buildQueryParameter(i,t[i][s],n),e!==!0&&(r[t[i][s]+""]=!0));else void 0!==t[i]&&(h+="&"+o.buildQueryParameter(i,t[i],n));return h.substring(1)},o.buildQueryParameter=function(t,e,n){return o.encodeQuery(t,n)+(null!==e?"="+o.encodeQuery(e,n):"")},o.addQuery=function(t,e,n){if("object"==typeof e)for(var r in e)m.call(e,r)&&o.addQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),u(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},o.removeQuery=function(t,e,n){var r,i,h;if(u(e))for(r=0,i=e.length;i>r;r++)t[e[r]]=void 0;else if("RegExp"===s(e))for(h in t)e.test(h)&&(t[h]=void 0);else if("object"==typeof e)for(h in e)m.call(e,h)&&o.removeQuery(t,h,e[h]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===s(n)?!u(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=c(t[e],n):t[e]!==String(n)||u(n)&&1!==n.length?u(t[e])&&(t[e]=c(t[e],n)):t[e]=void 0:t[e]=void 0}},o.hasQuery=function(t,e,n,r){switch(s(e)){case"String":break;case"RegExp":for(var i in t)if(m.call(t,i)&&e.test(i)&&(void 0===n||o.hasQuery(t,i,n)))return!0;return!1;case"Object":for(var c in e)if(m.call(e,c)&&!o.hasQuery(t,c,e[c]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(n)){case"Undefined":return e in t;case"Boolean":var p=Boolean(u(t[e])?t[e].length:t[e]);return n===p;case"Function":return!!n(t[e],e,t);case"Array":if(!u(t[e]))return!1;var l=r?h:a;return l(t[e],n);case"RegExp":return u(t[e])?r?h(t[e],n):!1:Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return u(t[e])?r?h(t[e],n):!1:t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.commonPath=function(t,e){var n,r=Math.min(t.length,e.length);for(n=0;r>n;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return 1>n?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},o.withinString=function(t,e,n){n||(n={});var r=n.start||o.findUri.start,i=n.end||o.findUri.end,s=n.trim||o.findUri.trim,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var c=r.exec(t);if(!c)break;var h=c.index;if(n.ignoreHtml){var a=t.slice(Math.max(h-3,0),h);if(a&&u.test(a))continue}var p=h+t.slice(h).search(i),l=t.slice(h,p).replace(s,"");if(!n.ignore||!n.ignore.test(l)){p=h+l.length;var f=e(l,h,p,t);t=t.slice(0,h)+f+t.slice(p),r.lastIndex=h+f.length}}return r.lastIndex=0,t},o.ensureValidHostname=function(e){if(e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},o.noConflict=function(t){if(t){var e={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(e.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(e.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=r.SecondLevelDomains.noConflict()),e}return r.URI===this&&(r.URI=b),this},_.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},_.clone=function(){return new o(this)},_.valueOf=_.toString=function(){return this.build(!1)._string},_.protocol=d("protocol"),_.username=d("username"),_.password=d("password"),_.hostname=d("hostname"),_.port=d("port"),_.query=v("query","?"),_.fragment=v("fragment","#"),_.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},_.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},_.pathname=function(t,e){if(void 0===t||t===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=t?o.recodeUrnPath(t):"":this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},_.path=_.pathname,_.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var r=t instanceof o,i="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var s=o.getDomAttribute(t);t=t[s]||"",i=!1}if(!r&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=o.parse(String(t),this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var u=r?t._parts:t;for(n in u)m.call(this._parts,n)&&(this._parts[n]=u[n])}return this.build(!e),this},_.is=function(t){var e=!1,r=!1,i=!1,s=!1,u=!1,c=!1,h=!1,a=!this._parts.urn;switch(this._parts.hostname&&(a=!1,r=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),e=r||i,s=!e,u=s&&n&&n.has(this._parts.hostname),c=s&&o.idn_expression.test(this._parts.hostname),h=s&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return a;case"absolute":return!a;case"domain":case"name":return s;case"sld":return u;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return c;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return h}return null};var E=_.protocol,C=_.port,k=_.hostname;_.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(o.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return E.call(this,t,e)},_.scheme=_.protocol,_.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return C.call(this,t,e)},_.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={},r=o.parseHost(t,n);if("/"!==r)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname}return k.call(this,t,e)},_.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol(),r=this.authority();return r?(n?n+"://":"")+this.authority():""}var i=o(t);return this.protocol(i.protocol()).authority(i.authority()).build(!e),this},_.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildHost(this._parts):"";var n=o.parseHost(t,this._parts);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},_.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildAuthority(this._parts):"";var n=o.parseAuthority(t,this._parts);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},_.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var n=o.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},_.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=o.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},_.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,r),u=new RegExp("^"+i(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&o.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(u,t),this.build(!e),this},_.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(e).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(o.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var s=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},_.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(r+1);return e!==!0&&n&&n.list[o.toLowerCase()]?n.get(this._parts.hostname)||o:o}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},_.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}var s=this._parts.path.length-this.filename().length,u=this._parts.path.substring(0,s),c=new RegExp("^"+i(u));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(c,t),this.build(!e),this},_.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return t?o.decodePathSegment(r):r}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var u=new RegExp(i(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(u,t),s?this.normalizePath(e):this.build(!e),this},_.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,s=this.filename(),u=s.lastIndexOf(".");return-1===u?"":(n=s.substring(u+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",t?o.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var c,h=this.suffix();if(h)c=t?new RegExp(i(h)+"$"):new RegExp(i("."+h)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return c&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(c,t)),this.build(!e),this},_.segment=function(t,e,n){var r=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),s=o.split(r);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&s.shift(),0>t&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(u(e)){s=[];for(var c=0,h=e.length;h>c;c++)(e[c].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(p(e[c])))}else(e||"string"==typeof e)&&(e=p(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=p(e):s.splice(t,1);return i&&s.unshift(""),this.path(s.join(r),n)},_.segmentCoded=function(t,e,n){var r,i,s;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(r=this.segment(t,e,n),u(r))for(i=0,s=r.length;s>i;i++)r[i]=o.decode(r[i]);else r=void 0!==r?o.decode(r):void 0;return r}if(u(e))for(i=0,s=e.length;s>i;i++)e[i]=o.encode(e[i]);else e="string"==typeof e||e instanceof String?o.encode(e):e;return this.segment(t,e,n)};var A=_.query;return _.query=function(t,e){if(t===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=o.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):A.call(this,t,e)},_.setQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in t)m.call(t,i)&&(r[i]=t[i])}return this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},_.addQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(r,t,void 0===e?null:e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},_.removeQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(r,t,e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},_.hasQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(r,t,e,n)},_.setSearch=_.setQuery,_.addSearch=_.addQuery,_.removeSearch=_.removeQuery,_.hasSearch=_.hasQuery,_.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},_.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},_.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},_.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},_.normalizePath=function(t){var e=this._parts.path;if(!e)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;e=o.recodePath(e);var n,r,i,s="";for("/"!==e.charAt(0)&&(n=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),n&&(s=e.substring(1).match(/^(\.\.\/)+/)||"",s&&(s=s[0]));;){if(r=e.search(/\/\.\.(\/|$)/),-1===r)break;0!==r?(i=e.substring(0,r).lastIndexOf("/"),-1===i&&(i=r),e=e.substring(0,i)+e.substring(r+3)):e=e.substring(3)}return n&&this.is("relative")&&(e=s+e.substring(1)),this._parts.path=e,this.build(!t),this},_.normalizePathname=_.normalizePath,_.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},_.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},_.normalizeSearch=_.normalizeQuery,_.normalizeHash=_.normalizeFragment,_.iso8859=function(){var t=o.encode,e=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},_.unicode=function(){var t=o.encode,e=o.decode;o.encode=f,o.decode=unescape;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},_.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var r="",i=0,s=e._parts.query.split("&"),u=s.length;u>i;i++){var c=(s[i]||"").split("=");r+="&"+o.decodeQuery(c[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==c[1]&&(r+="="+o.decodeQuery(c[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=o.decodeQuery(e.hash(),!0)},_.absoluteTo=function(t){var e,n,r,i=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),i._parts.protocol||(i._parts.protocol=t._parts.protocol),this._parts.hostname)return i;for(n=0;r=s[n];n++)i._parts[r]=t._parts[r];return i._parts.path?".."===i._parts.path.substring(-2)&&(i._parts.path+="/"):(i._parts.path=t._parts.path,i._parts.query||(i._parts.query=t._parts.query)),"/"!==i.path().charAt(0)&&(e=t.directory(),e=e?e:0===t.path().indexOf("/")?"/":"",i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},_.relativeTo=function(t){var e,n,r,i,s,u=this.clone().normalize();if(u._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=u._parts,n=t._parts,i=u.path(),s=t.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return u.build();if(null!==e.protocol||null!==e.username||null!==e.password)return u.build();if(e.hostname!==n.hostname||e.port!==n.port)return u.build();if(e.hostname=null,e.port=null,i===s)return e.path="",u.build();if(r=o.commonPath(i,s),!r)return u.build();var c=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=c+e.path.substring(r.length)||"./",u.build()},_.equals=function(t){var e,n,r,i=this.clone(),s=new o(t),c={},h={},p={};if(i.normalize(),s.normalize(),i.toString()===s.toString())return!0;if(e=i.query(),n=s.query(),i.query(""),s.query(""),i.toString()!==s.toString())return!1;if(e.length!==n.length)return!1;c=o.parseQuery(e,this._parts.escapeQuerySpace),h=o.parseQuery(n,this._parts.escapeQuerySpace);for(r in c)if(m.call(c,r)){if(u(c[r])){if(!a(c[r],h[r]))return!1}else if(c[r]!==h[r])return!1;p[r]=!0}for(r in h)if(m.call(h,r)&&!p[r])return!1;return!0},_.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},_.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o})},{"./IPv6":6,"./SecondLevelDomains":7,"./punycode":9}],9:[function(e,n,r){(function(e){!function(o){function i(t){throw new RangeError(P[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(R,".");var o=t.split("."),i=s(o,e).join(".");return r+i}function c(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=T(t>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function a(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:E}function p(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function l(t,e,n){var r=0;for(t=n?F(t/D):t>>1,t+=F(t/e);t>z*k>>1;r+=E)t=F(t/z);return F(r+(z+1)*t/(t+A))}function f(t){var e,n,r,o,s,u,c,p,f,d,v=[],b=t.length,_=0,m=S,y=N;for(n=t.lastIndexOf(O),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&i("not-basic"),v.push(t.charCodeAt(r));for(o=n>0?n+1:0;b>o;){for(s=_,u=1,c=E;o>=b&&i("invalid-input"),p=a(t.charCodeAt(o++)),(p>=E||p>F((x-_)/u))&&i("overflow"),_+=p*u,f=y>=c?C:c>=y+k?k:c-y,!(f>p);c+=E)d=E-f,u>F(x/d)&&i("overflow"),u*=d;e=v.length+1,y=l(_-s,e,0==s),F(_/e)>x-m&&i("overflow"),m+=F(_/e),_%=e,v.splice(_++,0,m)}return h(v)}function d(t){var e,n,r,o,s,u,h,a,f,d,v,b,_,m,y,g=[];for(t=c(t),b=t.length,e=S,n=0,s=N,u=0;b>u;++u)v=t[u],128>v&&g.push(T(v));for(r=o=g.length,o&&g.push(O);b>r;){for(h=x,u=0;b>u;++u)v=t[u],v>=e&&h>v&&(h=v);for(_=r+1,h-e>F((x-n)/_)&&i("overflow"),n+=(h-e)*_,e=h,u=0;b>u;++u)if(v=t[u],e>v&&++n>x&&i("overflow"),v==e){for(a=n,f=E;d=s>=f?C:f>=s+k?k:f-s,!(d>a);f+=E)y=a-d,m=E-d,g.push(T(p(d+y%m,0))),a=F(y/m);g.push(T(p(a,0))),s=l(n,_,r==o),n=0,++r}++n,++e}return g.join("")}function v(t){return u(t,function(t){return j.test(t)?f(t.slice(4).toLowerCase()):t})}function b(t){return u(t,function(t){return q.test(t)?"xn--"+d(t):t})}var _="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof e&&e;y.global!==y&&y.window!==y&&y.self!==y||(o=y);var g,w,x=2147483647,E=36,C=1,k=26,A=38,D=700,N=72,S=128,O="-",j=/^xn--/,q=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=E-C,F=Math.floor,T=String.fromCharCode;if(g={version:"1.3.2",ucs2:{decode:c,encode:h},decode:f,encode:d,toASCII:b,toUnicode:v},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return g});else if(_&&m)if(n.exports==_)m.exports=g;else for(w in g)g.hasOwnProperty(w)&&(_[w]=g[w]);else o.punycode=g}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){window._miniBus=new h["default"],window._miniBus._onPostMessage=function(e){t.contentWindow.postMessage(e,"*")},window.addEventListener("message",function(t){t.data.to&&t.data.to.startsWith("runtime:loadedHyperty")||window._miniBus._onMessage(t.data)},!1),
window._registry=new u["default"](window._miniBus),window._registry._create=function(t,e,n){return eval.apply(window,[e]),activate(t,window._miniBus,n)}}function i(t){return window._registry.components[t]}Object.defineProperty(n,"__esModule",{value:!0});var s=t("runtime-core/src/sandbox/SandboxRegistry"),u=r(s),c=t("runtime-core/src/bus/MiniBus"),h=r(c);n["default"]={create:o,getHyperty:i}},{"runtime-core/src/bus/MiniBus":3,"runtime-core/src/sandbox/SandboxRegistry":4}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=t("./RuntimeUAStub"),s=r(i),u=void 0;u=void 0!=("undefined"==typeof window?"undefined":o(window))&&null!=window?s["default"]:void 0,n["default"]=u},{"./RuntimeUAStub":12}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ContextApp"),i=r(o),s=t("urijs"),u=r(s),c=t("./iframe"),h=t("rx"),a=r(h),p=void 0,l=void 0,f=function(t,e){return{runtimeHypertyURL:e.body.runtimeHypertyURL,status:e.body.status,instance:t.instance,name:t.name}},d={requireHyperty:function(t){var e=this;return p.contentWindow.postMessage({to:"core:loadHyperty",body:{descriptor:t}},"*"),new Promise(function(t,n){e._messages.first(function(t){return"runtime:loadedHyperty"===t.data.to}).subscribe(function(e){return t(f(i["default"].getHyperty(e.data.body.runtimeHypertyURL),e.data))})})},requireProtostub:function(t){p.contentWindow.postMessage({to:"core:loadStub",body:{domain:t}},"*")}},v=function(t,e){return d._messages=e,e.filter(function(e){return e.data.to===t+"/gui-manager"&&"openURL"===e.data.body.method}).subscribe(function(n){l.style.display="block",l.src=n.data.body.value;var r=n.data.id;e.first(function(t){return"runtime:auth"===t.data.to}).subscribe(function(e){l.style.display="none",p.contentWindow.postMessage({id:r,to:t+"/idm",from:t+"/gui-manager",type:"response",body:{type:"200",value:e.data.value}},"*")})}),d},b={install:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.domain,r=e.runtimeURL,o=e.development;if(window.location.hash&&parent)return parent.postMessage({to:"runtime:auth",value:window.location.href},"*"),{then:function(){}};var s=this._getRuntime(r,n,o);return this._messages=a["default"].Observable.fromEvent(window,"message"),p=(0,c.create)("https://"+s.domain+"/.well-known/runtime/index.html?runtime="+s.url+"&development="+o),l=(0,c.create)("about:blank"),i["default"].create(p),new Promise(function(e,n){t._messages.first(function(t){return"runtime:installed"===t.data.to}).subscribe(function(n){return e(v(n.data.body.url,t._messages))})})},_getRuntime:function(t,e,n){return n?(t=t||"hyperty-catalogue://catalogue."+e+"/.well-known/runtime/RuntimeUA",e=e||new u["default"](t).host()):(t=t||"https://catalogue."+e+"/.well-known/runtime/default",e=e||new u["default"](t).host().replace("catalogue.","")),{url:t,domain:e}}};n["default"]=b},{"./ContextApp":10,"./iframe":13,rx:5,urijs:8}],13:[function(t,e,n){"use strict";function r(t){var e=document.createElement("iframe");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.border="5px solid red",e.width="100%",e.height="100%",e.setAttribute("seamless",""),e.setAttribute("src",t),e.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups"),e.style.display="none",document.querySelector("body").appendChild(e),e}Object.defineProperty(n,"__esModule",{value:!0}),n.create=r},{}]},{},[11])(11)});
//# sourceMappingURL=rethink.js.map
