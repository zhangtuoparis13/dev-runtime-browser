!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.policiesGui=e()}}(function(){return function e(t,o,i){function n(a,r){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!r&&s)return s(a,!0);if(l)return l(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){var o=t[a][1][e];return n(o?o:e)},u,u.exports,e,t,o,i)}return o[a].exports}for(var l="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),l=function(){function e(t){if(i(this,e),!t)throw Error("Policy Engine not set!");var o=this;o.policyEngine=t,$(".policies-btn").on("click",function(){o.showPoliciesGUI()}),o.setButtons()}return n(e,[{key:"setButtons",value:function(){var e=this;$(".back").on("click",function(t){return e.goHome()}),$(".group-new").on("click",function(t){return e.showNewGroupPanel()}),$(".group-add").on("click",function(t){return e.addGroup()}),$(".group-new-close").on("click",function(t){return e.goToPoliciesHome()}),$(".group-user-new").on("click",function(t){return e.showNewUserPanel()}),$(".group-user-add").on("click",function(t){return e.addUser()}),$(".group-allow").on("click",function(t){return e.changeGroupReachability(!0)}),$(".group-block").on("click",function(t){return e.changeGroupReachability(!1)}),$(".group-delete").on("click",function(t){return e.deleteGroup()}),$(".group-cancel").on("click",function(t){return e.goToPoliciesHome()}),$(".timeslot-creation").on("click",function(t){return e.showNewTimeslotPanel()}),$(".timeslot-new-allow").on("click",function(t){return e.addTimeslot(!0)}),$(".timeslot-new-block").on("click",function(t){return e.addTimeslot(!1)}),$(".timeslot-new-cancel").on("click",function(t){return e.goToPoliciesHome()}),$(".timeslot-change-allow").on("click",function(t){return e.changeTimeslot(!0)}),$(".timeslot-change-block").on("click",function(t){return e.changeTimeslot(!1)}),$(".timeslot-delete").on("click",function(t){return e.deleteTimeslot()}),$(".timeslot-cancel").on("click",function(t){return e.goToPoliciesHome()})}},{key:"showPoliciesGUI",value:function(){var e=this;e.showMyGroups(),e.showMyTimeslots(),$(".policies-gui").removeClass("hide")}},{key:"goHome",value:function(){$(".policies-gui").addClass("hide"),$(".identities-gui").addClass("hide")}},{key:"goToPoliciesHome",value:function(){$(".group-main").removeClass("hide"),$(".group-details").addClass("hide"),$(".group-new").removeClass("hide"),$(".group-new-panel").addClass("hide"),$(".timeslots-main").removeClass("hide"),$(".timeslot-details").addClass("hide"),$(".timeslot-creation").removeClass("hide"),$(".timeslot-new-panel").addClass("hide")}},{key:"showMyGroups",value:function(){var e=this,t=e.policyEngine.getGroupsNames(),o=t.length,i=$(".groups-names");if(i.html(""),0===o)i.append("<p>There are no groups to display.</p>");else for(var n=0;o>n;n++){var l=document.createElement("a");l.className="collection-item",l.appendChild(document.createTextNode(t[n])),i.append(l)}$(".groups-names").removeClass("hide"),$(".groups-names").on("click",function(t){return e.showGroupDetails()})}},{key:"showGroupDetails",value:function(e){var t=this,o=void 0;void 0===e?(o=event.target.innerText,$(".group-name").html(o),e=t.policyEngine.getGroup(o)):o=$(".group-name").text();var i=e.length,n=$(".group-members");if(0===i)n.html("<p>This group has no members.</p>");else{n.html("");var l=document.createElement("table");l.className="centered";for(var a=document.createElement("tbody"),r=0;i>r;r++){var s=document.createElement("tr"),c=document.createElement("td");c.textContent=e[r],s.appendChild(c),c=document.createElement("td");var u=document.createElement("button");u.textContent="Remove",u.className="remove-id waves-effect waves-light btn",c.appendChild(u),s.appendChild(c),a.appendChild(s)}l.appendChild(a),n.append(l),$(".remove-id").on("click",function(e){return t.deleteUser(o)})}var d=t.policyEngine.getGroupReachability(o),p="not set";void 0!==d&&(p=d?"allowed":"blocked"),$(".group-reachability").html("<p><b>Reachability status: </b> "+p+"</p>"),$(".group-main").addClass("hide"),$(".group-details").removeClass("hide"),$(".group-new").addClass("hide")}},{key:"createTableRow",value:function(e){var t=document.createElement("tr"),o=document.createElement("td");o.textContent=e,o.className="clickable-cell",o.style="cursor: pointer",t.appendChild(o),o=document.createElement("td");var i=document.createElement("button");return i.textContent="Remove",i.className="remove-id waves-effect waves-light btn",o.appendChild(i),t.appendChild(o),t}},{key:"deleteUser",value:function(e){var t=this,o=event.target.parentNode.parentNode.children[0].innerText;t.policyEngine.removeFromGroup(o,e),Materialize.toast("User '"+o+"' succesfuly removed from '"+e+"' group!",2e3),t.showGroupDetails(t.policyEngine.getGroup(e))}},{key:"showNewGroupPanel",value:function(){$(".group-new-panel").removeClass("hide"),$(".group-details").addClass("hide"),$("#newGroupName").val("")}},{key:"addGroup",value:function(){var e=this;$(".group-new-panel").addClass("hide");var t=$("#newGroupName").val();e.policyEngine.createGroup(t),Materialize.toast("Group '"+t+"' succesfuly created!",2e3),e.showMyGroups()}},{key:"showNewUserPanel",value:function(){$("#newUserEmail").val(""),$(".group-user-new-panel").removeClass("hide")}},{key:"addUser",value:function(){var e=this,t=$("#newUserEmail").val(),o=$(".group-name").text();e.policyEngine.addToGroup(t,o),e.showGroupDetails(e.policyEngine.getGroup(o)),Materialize.toast("User '"+t+"' successfully added to '"+o+"' group!",2e3),$(".group-user-new-panel").addClass("hide")}},{key:"addPolicy",value:function(e,t){var o=this,i={scope:"user",condition:e,authorise:t,actions:[]};o.policyEngine.addPolicies([i])}},{key:"changeGroupReachability",value:function(e){var t=this,o=$(".group-name").text();t.policyEngine.changePolicy("group "+o,e);var i=e?"allowed":"blocked";Materialize.toast("Reachability of '"+o+"' group succesfuly changed to "+i+"!",2e3),$(".group-reachability").html("<p><b>Reachability status: </b> "+i+"</p>")}},{key:"deleteGroup",value:function(){var e=this,t=$(".group-name").text();e.policyEngine.removeGroup(t),Materialize.toast("Group '"+t+"' succesfuly deleted!",2e3),e.goToPoliciesHome(),e.showMyGroups()}},{key:"showMyTimeslots",value:function(){var e=this,t=e.policyEngine.getTimeslots(),o=t.length,i=$(".timeslots");if(i.html(""),0===o)i.append("<p>There are no time restrictions set.</p>");else for(var n=0;o>n;n++){var l=t[n].split(" ");l.shift();var a=document.createElement("a");a.className="collection-item";var r=t[n].split(" ");a.appendChild(document.createTextNode(r[1]+" - "+r[2])),i.append(a)}$(".timeslots").removeClass("hide"),$(".timeslots").on("click",function(t){return e.showTimeslotDetails()})}},{key:"showTimeslotDetails",value:function(){var e=this,t=event.target.innerText;$(".timeslot").html(t);var o=t.split(" - "),i=e.policyEngine.getTimeslotById("time "+o[0]+" "+o[1]),n=i.authorise?"allowed":"blocked";$(".timeslot-reachability").html("<p><b>Reachability status: </b> "+n+"</p>"),$(".timeslots-main").addClass("hide"),$(".timeslot-details").removeClass("hide"),$(".timeslot-creation").addClass("hide")}},{key:"showNewTimeslotPanel",value:function(){$(".timeslot-new-panel").removeClass("hide"),$("#startTime").val(""),$("#endTime").val("")}},{key:"addTimeslot",value:function(e){var t=this,o=$("#startTime").val(),i=$("#endTime").val();t.addPolicy("time "+o+" "+i,e),Materialize.toast("Timeslot "+o+" to "+i+" succesfuly created!",2e3),t.goToPoliciesHome(),t.showMyTimeslots()}},{key:"changeTimeslot",value:function(e){var t=this,o=$(".timeslot").text(),i=o.split(" - ");t.policyEngine.changePolicy("time "+i[0]+" "+i[1],e);var n=e?"allowed":"blocked";Materialize.toast("Timeslot reachability succesfuly changed to "+n+"!",2e3),$(".timeslot-reachability").html("<p><b>Reachability status: </b> "+n+"</p>")}},{key:"deleteTimeslot",value:function(){var e=this,t=$(".timeslot").text(),o=t.split(" - ");e.policyEngine.removePolicies("time "+o[0]+" "+o[1],"user"),Materialize.toast("Timeslot "+o[0]+" to "+o[1]+" succesfuly deleted!",2e3),e.goToPoliciesHome(),e.showMyTimeslots()}}]),e}();o["default"]=l},{}]},{},[1])(1)});
//# sourceMappingURL=policies-gui.js.map
